<apex:page cache="true" controller="BMCServiceDesk.ChangeRequestController" sidebar="false" showHeader="false"  contentType="{!changeBean.contentTypeForIE}" extensions="BMCServiceDesk.JSRemoteActions">
<c:CommonIncludes />
<apex:includeScript value="{!$Resource.BMCServiceDesk__SDEFCommonJS}/JSTemplate.js"/>

<script>
    windowloaddate = new Date();
    networklatencystart = windowloaddate.getTime();
    window.parent.needsRefresh = false;
  </script> 
 <apex:includeScript value="{!$Resource.BMCServiceDesk__SDEFCommonJS}/ChangeRequestCustom.js"/> 
  <link rel="stylesheet" type="text/css" href="{!$Resource.SDEFStyles}/ChangeRequestPage.css" />
  <link rel="stylesheet" type="text/css" href="{!$Resource.SDEFStyles}/CustomViews.css" />
  <apex:includeScript value="{!$Resource.BMCServiceDesk__SDEFCommonJS}/ChangeAutocomplete.js"/> 
  <apex:includeScript value="{!$Resource.BMCServiceDesk__SDEFCommonJS}/CustomFieldsFormGeneral.js"/>
 <style>
.errorMsg{
 display:none !important;

}
.datePicker{
    left:600px !important;
}
.picklistArrowLeft{
  margin-top:-12px;
}
.panelContent {
    height: 320px;
}
</style> 
<c:UserContextComponent />
<apex:outputPanel >
    <script>
	     function showDataCommonTest(event){
	     	showDataCommon(event, null, escape('inactive__c = false'));
	     }
	    function disableMe(obj){
        	obj.blur();
        	obj.disabled = true;
        }   
        function validateMe(){
        
        }
        function hideWaitImg(){
            if(waitMsg != null && typeof(waitMsg) != 'undefined' && waitMsg !='')
                waitMsg.hide();
        } 
        function refreshRelatedPortlets(){
                if(typeof(window.parent.parent.refreshActionItemsPortlet) == 'function')
                        window.parent.parent.refreshActionItemsPortlet('Action Items','CR');
                if((getIsChildTempExist() == 'true' || getIsChildTempExist() == true)&& typeof(window.parent.parent.refreshActionItemsPortlet) == 'function'){
                        window.parent.parent.refreshActionItemsPortlet('Action Items','TASK');
                }
      }
      var changeId;   
      var isdependent= false;
      var isChangeCreatable;
      var isChangeDeletable; 
      var isChangeUpdateable;
      var doNotCalUrgency = false;;
      var isCustomPage=true; 
      var closedStageName = '{!JSENCODE(changebean.statusName)}'; 
    </script>
    <script>
    var wid = '{!JSENCODE($CurrentPage.parameters.wid)}',
        wid2 = '{!JSENCODE($CurrentPage.parameters.wid)}',
        labelSavedSuccessfully = '{!JSENCODE($Label.SavedSuccessfully)}',
        labelPM_netwokLatency = '{!JSENCODE($Label.PM_netwokLatency)}',
        labelCIExpCIExplorer = '{!JSENCODE($Label.CIExpCIExplorer)}',
        labelConfigurationItemsExplorer = '{!JSENCODE($Label.ConfigurationItemsExplorer)}',
        labelValidDateTime = '{!JSENCODE($Label.ValidDateTime)}',
        labelDelete = '{!JSENCODE($Label.Delete)}',
        labelDeleteTaskPage = '{!JSENCODE($Label.DeleteConfirmMessage)}',
        labelNew = '{!JSENCODE($Label.New)}',
        labelSave = '{!JSENCODE($Label.Save)}',
        labelOK = '{!JSENCODE($Label.Ok)}',
        labelCopy = '{!JSENCODE($Label.Copy)}',
        labelReset = '{!JSENCODE($Label.Refresh)}',
        labelAssignTo = '{!JSENCODE($Label.AssignTo)}',
        labelIncidentsStaff = '{!JSENCODE($Label.IncidentsStaff)}',
        labelIncidentsSuggestedStaff = '{!JSENCODE($Label.IncidentsSuggestedStaff)}',
        labelIncidentMyself = '{!JSENCODE($Label.IncidentMyself)}',
        labelIncidentMemberofProfName = '{!JSENCODE($Label.IncidentMemberof)} {!userProfileName}',
        labelQueue = '{!JSENCODE($Label.Queue)}',
        labelActions = '{!JSENCODE($Label.Actions)}',
        labelIncidentClose = '{!JSENCODE($Label.Close)}',
        labelIncidentQuickClose = '{!JSENCODE($Label.IncidentQuickClose)}',
        labelReopenChange = '{!JSENCODE($Label.ReopenChange)}',
        labelResponded = '{!JSENCODE($Label.IncidentResponded)}', 
        labelTemplate = '{!JSENCODE($Label.Template)}',
        labelLaunchCIExplorer = '{!JSENCODE($Label.LaunchCIExplorer)}',
        labelTooltipChangeInactive = '{!JSENCODE($ObjectType.Change_Request__c.fields.Inactive__c.label)}',
        labelPreviousRecord = '{!JSENCODE($Label.PreviousRecord)}',
        labelNextRecord = '{!JSENCODE($Label.NextRecord)}',
        labelDragResizeClickCollapse = '{!JSENCODE($Label.DragResizeClickCollapse)}',
        labelClickToExpand = '{!JSENCODE($Label.ClickToExpand)}',
        labelMsgNoAccessPerm = '{!JSENCODE($Label.MsgNoAccessPerm)}',
        labelPM_PageLoad = '{!JSENCODE($Label.PM_PageLoad)}',
        labelPM_netwokLatency = '{!JSENCODE($Label.PM_netwokLatency)}',
        labelSelectFrom = '{!JSENCODE($Label.SelectFrom)}', 
        labelCancel = '{!JSENCODE($Label.Cancel)}',
	    labelServiceTargets = '{!JSENCODE($Label.SLM_ServiceTargets)}',
        ChangeRequestHeader = '{!JSENCODE($ObjectType.Change_Request__c.label)}',
        labelChangeMgmtProcess = '{!JSENCODE($Label.ChangeMgmtProcess)}',
        ChangeProcess= '{!JSENCODE($Label.ChangeProcess)}',
        AlignabilityProcessModel = '{!JSENCODE($Label.AlignabilityProcessModel)}',
        ClosedStage = '{!JSENCODE($Label.ClosedStage)}',
        labelMsgPageHeader = '{!JSENCODE($Label.ComposeEmailChangePageHeader)}',
        labelEmailMessage = '{!JSENCODE($Label.Email)}',
        labelRolloutPlan='{!JSENCODE($ObjectType.Change_Request__c.fields.Roll_Out_Plan__c.label)}',
        labelBackoutPlan='{!JSENCODE($ObjectType.Change_Request__c.fields.Back_Out_Plan__c.label)}',
        labelReasonForChange='{!JSENCODE($ObjectType.Change_Request__c.fields.Reason_for_Change__c.label)}',
        labelChangeDescription='{!JSENCODE($ObjectType.Change_Request__c.fields.Change_Description__c.label)}',
        labelInactive ='{!JSENCODE($ObjectType.Change_Request__c.fields.Inactive__c.label)}',
        rolloutComponent = '{!$Component.changeForm.change_Roll_Out_Plan__c}',
        backoutComponent = '{!$Component.changeForm.change_Back_Out_Plan__c}',
        changeDescriptionComponent = '{!$Component.changeForm.change_Change_Description__c}',
        resonforChangeComponent ='{!$Component.changeForm.change_Reason_for_Change__c}',
        reviewCommentsComponent = '{!$Component.changeForm.change_Review_Comments__c}',
        profileId = '{!$Profile.Id}',
        DeletedRecord = '{!JSENCODE($Label.DeleteConfirmMessage)}',
        Information = '{!JSENCODE($Label.Information)}',
        changeFormComponent = '{!$Component.changeForm}',
        cookieName= 'ConfigureSI'+'{!changeBean.currentUserId}',
        labelRecordDeleted ='{!JSENCODE($Label.DeletedRecord)}', 
        cookieValue = Ext.util.Cookies.get(cookieName),
        modName = '{!JSENCODE($CurrentPage.parameters.moduleName)}',
        parentWid = '{!JSENCODE($CurrentPage.parameters.parentWid)}',
        islookup = '{!JSENCODE($CurrentPage.parameters.islookup)}',
		ChangeChatterFeed = '{!JSENCODE($Label.ChangeChatterFeed)}', 
        OverwriteWarning ='{!JSENCODE($Label.OverwriteWarning)}',
        replaceUnsaved = '{!JSENCODE($Label.replaceUnsaved)}',
        wid = '{!JSENCODE($CurrentPage.parameters.wid)}',
        labelIncidentPlural = "{!JSENCODE($ObjectType.Incident__c.LabelPlural)}",
        labelChangeQueue  = "{!JSENCODE($Label.Queue)}"; 
		pageUrl= document.location.href.split('apex/');
        var txtSize;
        isErrorMsg=false;
Ext.ns("ChangePageComp");
         ChangePageComp.ComponentVars = {
            customFieldAccordionPanelId: '{!$Component.changeForm.pbarId.AdditionalFieldspanelBar}',
            IsPriorityChanged: '{!$Component.changeForm.pbarId.changedetail.Priority__c__isPriorityChanged}',
            DueDateCalculationOption: '{!$Component.changeForm.pbarId.changedetail.dueDateCalculationOption}',
            StatusId: '{!$Component.changeForm.pbarId.changedetail.Status__c_id_name}',
            ImpactIDName: '{!$Component.changeForm.pbarId.changedetail.Impact__c_id_name}',
            UrgencyIDName: '{!$Component.changeForm.pbarId.changedetail.Urgency__c_id_name}',
            changeForm: '{!$Component.changeForm}',
            UserLastName: '{!$Component.changeForm.User_id_lastname}',
            PerformancePanel: '{!$Component.changeForm.pbarId.PerformancepanelBar.PerformancePanel}',
            TestPanelID: '{!$Component.changeForm.testpanelId}',
            BaseElementIDName: '{!$Component.changeForm.pbarId.CIDetail.BMC_BaseElement__c_id_name__c}',
            CIExpButton: '{!$Component.changeForm.pbarId.CIDetail.CIExpBut}',
            CategoryIDName: '{!$Component.changeForm.Category__c_id_name}',
            UserID: '{!$Component.changeForm.User_id_id}',
            UserName: '{!$Component.changeForm.User_id_username}',
            CategoryID: '{!$Component.changeForm.Category__c_id_id}',
            CategoryFKUrgency: '{!$Component.changeForm.Category__c_id_fkurgency__c}',
            UrgencyIDName: '{!$Component.changeForm.pbarId.changedetail.Urgency__c_id_name}',
            UrgencyID: '{!$Component.changeForm.pbarId.changedetail.Urgency__c_id_id}',
            ImpactID: '{!$Component.changeForm.pbarId.changedetail.Impact__c_id_id}',
            PriorityID: '{!$Component.changeForm.pbarId.changedetail.varFKPriority}',
            PriorityName: '{!$Component.changeForm.pbarId.changedetail.Priority__c_id_name}',    
            BroadcastIDName: '{!$Component.changeForm.pbarId.broadcastDetails.Broadcasts__c_id_name}',
            PBarItemIDCD: '{!$Component.pbarId.pbarItemIdCD}',
            clientFKUrgency: '{!$Component.changeForm.User_id_fkurgency__c}',
			ChatterdAccordionPanelId: '{!$Component.changeForm.pbarId.ChangeChatterFeed}'
         }
Ext.ns("AddNoteComp");
            AddNoteComp.ComponentVars={
                    Notes:'{!$Component.changeForm.ChangeNotes}',
                    Duration: '{!$Component.changeForm.ChangeRequestDuration}'
            }
Ext.ns("AddNote");
            AddNote.Labels ={
                DurationError:'{!JSENCODE($Label.DurationError)}',
                Note: '{!JSENCODE($ObjectType.Change_History__c.fields.Note__c.label)}',
                TextAreaOverflow:'{!JSENCODE($Label.TextAreaOverflow)}'
            }
      
    </script>
    <script>
 	 var orgNamespace = '{!orgNamespace}'; 
 var activeTextAreaId=changeDescriptionComponent,
     activeBtnTitle=labelChangeDescription;
     var txtSize;
     var changeState,
     changeRequestId, changeRequestName='' ;
    
    var data = '';
    data += '{!JSENCODE($Label.PM_servertime)}';
    function isRecordDeleted(){
        return {!isRecDeleted};
    }
 </script>
</apex:outputPanel>
<apex:outputpanel id="addNotePanel">
 <script>
  
    function renderAddNoteAfterClose(){
             var elem = document.getElementById('{!$Component.changeForm.ChangeNotes}');
             var elemduration = document.getElementById('{!$Component.changeForm.ChangeRequestDuration}');
             renderAddNoteAfterClose_JS(elem,elemduration);
        }
        function getapplyTemp(){
 		setcheckforTemplate = '{!showtemplatecheck}'; 
 		overwrite = '{!overwrite}';
	}
   function renderSIComponent(){
        cookieValue = Ext.util.Cookies.get(cookieName);
        if(cookieValue == true || cookieValue =='true')
            SIComp('/apex/SIContainerPage?oid='+getChangeId() +'&otype=Change_Request__c&wid='+wid+'&stateofIncident='+getChangeCloseState()+ '&isChangeCreatable='+getIsChangeCreatable()+'&isInactive='+isInactive);
        else     
            removeSI('/apex/SIContainerPage?oid='+getChangeId()+'&otype=Change_Request__c&wid='+wid+'&stateofIncident='+getChangeCloseState()+ '&isChangeCreatable='+getIsChangeCreatable()+'&isInactive='+isInactive);
     
     }
        
        function renderAddNoteButton(){
            var elem = document.getElementById('{!$Component.changeForm.ChangeNotes}');
            var elemduration = document.getElementById('{!$Component.changeForm.ChangeRequestDuration}');
            renderAddNoteButton_JS(elem,elemduration,changeState, changeRequestId);
        }   
        function renderChangeNote(){
         renderNote_JS();   
       }    
       function disableAddNote() {
           var changeNote = document.getElementById('{!$Component.changeForm.ChangeNotes}').value;
           var changeDuration = document.getElementById('{!$Component.changeForm.ChangeRequestDuration}').value;
           disableAddNote_JS(changeNote,changeDuration);
       }
 
       function validateDuration(){
           var changeDurationElem = document.getElementById('{!$Component.changeForm.ChangeRequestDuration}');
           validateDuration_JS(changeDurationElem);
       }
      function afterResetSI(){
            var modName = getModName();  
            var parentWid = getParentWid();
            if(modName != null && modName != '' && typeof(modName) != 'undefined' && parentWid != null && parentWid != '' && typeof(parentWid) != 'undefined' && (errormsg==labelSavedSuccessfully || errormsg == '')){
                window.parent.parent.refreshSupportingInformation(parentWid,modName);

            }
        }
 </script>
</apex:outputpanel>
<script>
 var isAutocomplete = false;
        var selectId=0;
        var selectClientId=0;
        var iKeyCodeEvt;
        // Added for Autocomplete   
        var impactData = window.parent.parent.impactData;  
        var urgencyData = window.parent.parent.urgencyData;
        var categoryData = window.parent.parent.categoryData;
        var list= '[]';
        var catId='{!$Component.changeForm.Category__c_id_name}';
        var impId='{!$Component.changeForm.pbarId.changedetail.Impact__c_id_name}';
        var urgId='{!$Component.changeForm.pbarId.changedetail.Urgency__c_id_name}';
        var selectIdForAutoCom;
        var divIdForAutoCom;
        var fieldForAutoCom;
        var eventFoeAutoCom;
        var clUname='{!$Component.changeForm.User_id_username}';
        var clFname='{!$Component.changeForm.User_id_firstname}';
        var clLname='{!$Component.changeForm.User_id_lastname}';
        //var customfieldsdisplay = '{!changeBean.CustomFieldsAccordionDisplay}';
        var isInactive= '{!changeBean.changeReqObj.Inactive__c}';
        function getStaffHiddeninput(){
            var staffHiddeninput = '{!$Component.changeForm.staffHiddeninput}';
            return staffHiddeninput;
        }
     var cilink_record = '{!cilink}';
</script>
<apex:outputPanel id="panelId">
<script>
var taboutFlag=false;
function FetchUrgencyHTTP(){
        var  catId = document.getElementById('{!$Component.changeForm.Category__c_id_id}').value;
        var  clientId = document.getElementById('{!$Component.changeForm.User_id_id}').value;
        var catUrgency = document.getElementById('{!$Component.changeForm.Category__c_id_fkurgency__c}').value;
        var clientUrgency = document.getElementById('{!$Component.changeForm.User_id_fkurgency__c}').value;
        if(callFetchUrgencyHTTPJS(clientId, catId, clientUrgency, catUrgency)){
                FetchUrgencyHTTPJS('{!JSENCODE(changeBean.changeReqObj.id)}', '{!$Component.changeForm.Category__c_id_id}',
                    '{!$Component.changeForm.User_id_id}', '{!$Component.changeForm.pbarId.changedetail.Impact__c_id_id}',
                    null,
                    '{!$Component.changeForm.pbarId.changedetail.Urgency__c_id_name}',
                    '{!$Component.changeForm.pbarId.changedetail.Urgency__c_id_id}',
                    '{!$Component.changeForm.pbarId.changedetail.Priority__c_id_name}',
                    '{!$Component.changeForm.pbarId.changedetail.varFKPriority}',null,
                    '{!$Component.changeForm.priorityNameVal}');
        }   

}
function FetchPriorityHTTP(){
            var impactId = document.getElementById('{!$Component.changeForm.pbarId.changedetail.Impact__c_id_id}').value;
            var urgencyId = document.getElementById('{!$Component.changeForm.pbarId.changedetail.Urgency__c_id_id}').value;
            if(impactId != null && impactId != '' && urgencyId != null && urgencyId != ''){
                FetchPriorityHTTPJS(impactId,
                urgencyId,
                '{!$Component.changeForm.pbarId.changedetail.Priority__c_id_name}',
                '{!$Component.changeForm.pbarId.changedetail.varFKPriority}',null,
                '{!$Component.changeForm.priorityNameVal}');
            }
        }

    function getChangeId(){
            var changeId = '{!changeBean.changeReqObj.Id}';
         
            return changeId;
        }
    function getIsChangeCreatable(){
            var isChangeCreatable = '{!changeBean.isChangeCreatable}';
            return isChangeCreatable;
        }
  function getWID(){
            return '{!JSENCODE($CurrentPage.parameters.wid)}';
        }

 function getModName(){
            return '{!JSENCODE($CurrentPage.parameters.moduleName)}';
        }

        function getParentWid(){
            return '{!JSENCODE($CurrentPage.parameters.parentWid)}';
        }

        function getIsLookUp(){
            return '{!JSENCODE($CurrentPage.parameters.islookup)}';
        }  

        function getIsDirect(){
            return '{!JSENCODE($CurrentPage.parameters.isDirect)}';
        }
    function getID(){
            return '{!JSENCODE($CurrentPage.parameters.id)}';
        }
     function getIsChangeDeletable(){
            var isChangeDeletable = '{!changeBean.isChangeDeletable}';
            return isChangeDeletable;
        }
     function getisChangeUpdateable(){
            var isChangeUpdateable = '{!changeBean.isChangeUpdateable}';
            return isChangeUpdateable;
        }    
         function getIsCopySaved(){    
       return '{!changeBean.isCopySaved}';
     }

    changeId = getChangeId();
    isChangeCreatable = getIsChangeCreatable();
    isChangeDeletable =getIsChangeDeletable();
    var iFrameSrc;
function completeDelete(){
	            if(errormsg == '{!JSENCODE($Label.InsufficentDeletePrivilege)}'){
                	showError();
                }else{
                    var modName = "{!JSENCODE($CurrentPage.parameters.moduleName)}";
                    var parentWid = "{!JSENCODE($CurrentPage.parameters.parentWid)}";
                    if(modName != null && modName != '' && typeof(modName) != 'undefined' && parentWid != null && parentWid != '' && typeof(parentWid) != 'undefined'){
                        window.parent.parent.refreshSupportingInformation(parentWid,modName);
                    }else{
                    	updateTitle();
                    }
                    closeWindow();
                }
     }
    
            
</script>
</apex:outputPanel>
<apex:outputPanel id="repeatId">
         
          <script> ownerIdString=''; priorityString=''; </script>
               <apex:repeat value="{!keyValues}" var="mapkeys"> 
                   <script>
                          taboutFlag=true;
                          keyName='{!mapkeys.key}';
                          keyValue={!mapkeys.value};
                          
                          if(keyName=='FKUrgency__c'){
                            doNotCalUrgency = true;
                          }
                          if(keyName=='change_Inactive__c'){
                              Ext.getCmp('change_inactive__c').setValue(keyValue);
                          }else if(keyName=='change_OwnerId'){
                              ownerIdString = keyValue;
                          }else if(keyName=='FKPriority'){
                                priorityString = keyValue;                  
                          }else if(keyName=='FKPriorityName'){
                                priorityNameString = keyValue;                  
                          }else{
                              setChangeTemplVal(keyName,keyValue); 
                          }
                  </script>
               </apex:repeat>
              <script>
                //setAssignedToJS(ownerIdString);                 
                      if(priorityString != null && priorityString != '' && priorityString != 'undefined'){
                           document.getElementById(ChangePageComp.ComponentVars.PriorityID).value =  priorityString;
                           document.getElementById(ChangePageComp.ComponentVars.PriorityName).value = priorityNameString;
                      }
               </script>
         </apex:outputPanel> 
         
<apex:outputPanel id="errorId">
  <script>
       errormsg = '{!JSENCODE(changeBean.messageString)}';
       if(errormsg != null && errormsg !='' && errormsg !=labelSavedSuccessfully)
	  		 isErrorMsg=true;
	  		else
       		 isErrorMsg=false;
    </script>
</apex:outputPanel>
<apex:outputPanel id="afterSavDelCloseReopen">
<script>
        function getIsChildTempExist(){
            var isChildTempExist = '{!changeBean.isChildTempExist}';
            return isChildTempExist;
        }               
</script>
</apex:outputPanel>
<apex:outputPanel id="changeFormPanel">
    <script>
    updateFieldsOnSave('{!changeBean.changeName}');
    changeState = '{!changeBean.changeReqObj.State__c}';
    changeRequestId = '{!changeBean.changeReqObj.id}';
	changeRequestName = '{!JSENCODE(changeBean.changeName)}';
	hasServiceTargets = {!HasServiceTargets};
	if(typeof(ChangeServiceTargetButtonState)!='undefined' && ChangeServiceTargetButtonState!=null) ChangeServiceTargetButtonState();
    </script>
</apex:outputPanel>


<script>
    function getSDFStylesResPath(){
        var resPath = '{!$Resource.SDEFStyles}';
        return resPath;
    }

var assignStaffState ='';
var separator='-';
      function setCatData(id, name, catUrgency) {
            document.getElementById('{!$Component.changeForm.Category__c_id_name}').value = name;
            document.getElementById('{!$Component.changeForm.Category__c_id_id}').value = id;
            document.getElementById('{!$Component.changeForm.Category__c_id_fkurgency__c}').value = catUrgency;
            FetchUrgencyHTTP();
      }
      
      function getAssignMyselfState(){
         var assignMyselfState = '{!changeBean.assignMyselfState}';
         return assignMyselfState;
      }
      function enableMyself(){
        Ext.getCmp('assignToMyselfButtonId').setDisabled(false);
      }
      function disableMyself(){
        Ext.getCmp('assignToMyselfButtonId').setDisabled(true);
      }

</script>
<apex:outputPanel id="changeInactivePanel">
      <script>
      function getChangeInactive(){
          var changeInactive = '{!changeBean.changeReqObj.Inactive__c}';
          return changeInactive;
      }
      function getInactiveDisable(){
        var disableInactive = "{!JSENCODE($CurrentPage.parameters.isInactive)}"; 
        return disableInactive;
      }
</script>
      </apex:outputPanel>

<apex:outputPanel id="titlePanel">
    <script>
        isInactive= '{!changeBean.changeReqObj.inactive__c}';
        var wid = '{!JSENCODE($CurrentPage.parameters.wid)}';
        function updateTitle(){
            var newTitle = '#{!changeBean.changeName}';  
                        var StageHTML = '{!changeBean.stageHTML}';
            if(newTitle == '#'){
                newTitle = '{!JSENCODE($ObjectType.Change_Request__c.label)}';
            }

            window.parent.changeTitle(wid,newTitle,newTitle);
                        window.parent.addStageProgression(wid, StageHTML);
           
           var changeState = "{!changeBean.changeReqObj.state__c}";
           if(changeState == 'false'){
                renderAddNoteAfterClose();    
           }             
            
        }
        
        
        function createCustomFieldMap(){
            createControlMap();
            renderElementsByType();         
        }
        
        function updateInactive(){
            Ext.getCmp('change_inactive__c').setValue('{!changeBean.changeReqObj.inactive__c}');
        }
          
    </script>
</apex:outputPanel>
<script>
    customActionJsonString = {!customActionJsonString};
    </script>
<apex:outputPanel id="afterSaveId">
  <script>
		changeRequestId = '{!changeBean.changeReqObj.id}';
		changeRequestName = '{!JSENCODE(changeBean.changeName)}';
		print_url=pageUrl[0]+'{!changeBean.changeReqObj.id}'+'/p';
        print_url_pdf='/apex/PrintObjectDetailPDF?id=' +'{!changeBean.changeReqObj.id}';
		hasServiceTargets = {!HasServiceTargets};
		if(typeof(ChangeServiceTargetButtonState)!='undefined' && ChangeServiceTargetButtonState!=null) ChangeServiceTargetButtonState();

       var changeIdCopy = '{!changeBean.changeReqObj.Id}';
       function enableCustomAction(){
	        	var instanceId = '{!changeBean.changeReqObj.Id}';
	        	enableCustomActionJS(instanceId);
	        }
       function handleSave(){
               var id = "{!changeBean.changeReqObj.Id}";
             
            window.parent.handleSave(wid, id);
        }
        
    	function callCopyPage(){
        	var changePageHeader = '{!JSENCODE($ObjectType.Change_Request__c.label)}';
        	window.parent.addTab("ChangeRequestPageCustom?copyId=" + changeIdCopy,changePageHeader,changePageHeader);
    	}    
   
  function fieldInfo_out(obj){

   document.getElementById(obj.id).src='{!$Resource.SDEFStyles}/SDEFbuttons/icon_field_info.png';
  
  		}
        function disableSIMenu(){
              if(document.getElementById(ChangePageComp.ComponentVars.StatusId).value== 'CLOSED'){
                    window.frames.SIIframeID.disableAll();
               }
        }

        function closeChangeRequest(){
          var changeId='{!changeBean.changeReqObj.Id}';
              openPopupWithTitle('CloseChangePage?changeId='+getChangeId()+'&isLookup=true',
                        setCloseChangeRequest, '{!JSENCODE($Label.CloseChange)}', 390, 600);
        
        }
        function resetSupportingInformation(isSave){
            var v1 = {!changeBean.changeReqObj.State__c};
            var inactive = {!changeBean.changeReqObj.Inactive__c}
            var isDisplay = document.getElementById('SIIframeID').style.display;
            if(isDisplay !='none'){
                if(!v1 || inactive){ 
                        window.frames.SIIframeID.disableAll();
                  }else{
                        window.frames.SIIframeID.enableAll();
                }
                //window.frames.SIIframeID.setId('{!changeBean.changeReqObj.Id}',isSave); 
            }  
            
         } 
         var changeCloseState='{!changeBean.changeReqObj.State__c}';
           
         function getChangeCloseState(){
            return changeCloseState;
         }
         function getCloseComments(){
            return '{!JSENCODE(changeBean.changeReqObj.Close_Comments__c)}';
         }
         function getChangeId(){
           	return  '{!JSENCODE(changeBean.changeReqObj.Id)}';
          }
		function buttonValidators() {
		    changeId=getChangeId();
		
		    if(changeId  != null && changeId!=''){ 
		        var isDisplay = document.getElementById('SIIframeID').style.display;
				Ext.getCmp('printButtonId').setDisabled(false);
		        Ext.getCmp('printPdfButtonId').setDisabled(false);
		        if(cookieValue =='true' && isDisplay =='none' ){
		            SIComp('/apex/SIContainerPage?oid='+changeId +'&otype=Change_Request__c&wid='+wid+'&stateofIncident='+getChangeCloseState()+'&isChangeCreatable='+getIsChangeCreatable()+'&isInactive='+isInactive);
		        }else{
		            if(isDisplay == 'none') {
		                document.getElementById('onDemandSITableId').style.display = 'block';
		                document.getElementById('noSIAvailTD').style.display = 'none';
		                document.getElementById('linkSIAvailTD').style.display = 'block';
		            }
		        }
		        
		        if(getChangeCloseState() == 'false'){
		        	Ext.getCmp('emailId').setDisabled(true);
		            Ext.getCmp('closeButtonId').setDisabled(true);
		            Ext.getCmp('reopenButtonId').setDisabled(false); 
		            Ext.getCmp('saveId').setDisabled(true);
		            Ext.getCmp('assignToStaffButtonId').setDisabled(true);
		            Ext.getCmp('assignToQueueButtonId').setDisabled(true);
		            Ext.getCmp('assignToMemberOfAdminButtonId').setDisabled(true);
		            Ext.getCmp('assignToMyselfButtonId').setDisabled(true);
		            Ext.getCmp('respondedButtonId').setDisabled(true);
		            Ext.getCmp('templateBtnId').setDisabled(true);
		        }    
		        if(getChangeCloseState() == 'true'){
		        	Ext.getCmp('emailId').setDisabled(false);
					Ext.getCmp('emailId').setIconClass('bmcEmailMessage');
		            Ext.getCmp('closeButtonId').setDisabled(false);
		            Ext.getCmp('reopenButtonId').setDisabled(true); 
		            Ext.getCmp('respondedButtonId').setDisabled(false);
		            Ext.getCmp('saveId').setDisabled(false);
		            Ext.getCmp('assignToStaffButtonId').setDisabled(false);
		            Ext.getCmp('assignToQueueButtonId').setDisabled(false);
		            Ext.getCmp('assignToMemberOfAdminButtonId').setDisabled(false);
		            if(setcheckforTemplate=='true')
				 		Ext.getCmp('templateBtnId').setDisabled(false);
				 	else
				 		Ext.getCmp('templateBtnId').setDisabled(true);
		             if({!changeBean.assignMyselfState}){
		                Ext.getCmp('assignToMyselfButtonId').setDisabled(false);
		             }else{
		                Ext.getCmp('assignToMyselfButtonId').setDisabled(true);
		             }
		        }
		        isChangeDeletable =getIsChangeDeletable();
				if(isChangeDeletable != null && isChangeDeletable == 'false'){
					Ext.getCmp('deleteId').setDisabled(true);
					Ext.getCmp('deleteId').setIconClass('bmcDeleteDisable');
				}
				isChangeUpdateable = getisChangeUpdateable();
				if(isChangeUpdateable != null && isChangeUpdateable == 'false'){
					Ext.getCmp('saveId').setDisabled(true);
		            Ext.getCmp('closeButtonId').setDisabled(true);
		           	Ext.getCmp('reopenButtonId').setDisabled(true);
		           	Ext.getCmp('assignToStaffButtonId').setDisabled(true);
		           	Ext.getCmp('assignToQueueButtonId').setDisabled(true);
					Ext.getCmp('assignToMemberOfAdminButtonId').setDisabled(true);
					Ext.getCmp('assignToMyselfButtonId').setDisabled(true);
					Ext.getCmp('respondedButtonId').setDisabled(true);
				}       
		    }
		       if(isErrorMsg)
	      	  Ext.getCmp('saveId').setDisabled(false);             
		}         
		function getServiceRequestId(){
	        return '{!changeBean.changeReqObj.BMCServiceDesk__FKServiceRequest__c}';
	    }
	    function getServiceRequestName(){
	        return '{!changeBean.changeReqObj.FKServiceRequest__r.Name}';
	    }
	    
	    objName = "{!JSENCODE(objName)}";
	    
iFrameSrc='/apex/SIContainerPage?oid='+changeId+'&otype=Change_Request__c&wid='+wid+'&stateofIncident='+getChangeCloseState()+'&isChangeCreatable='+getIsChangeCreatable()+'&isInactive='+isInactive;        
function menuHandler(){
    if({!changeBean.isChangeCreatable}){
        changeMenuHandler('{!changeBean.assignMyselfState}','{!changeBean.changeReqObj.Id}','{!changeBean.closeState}');
    }
}  
    </script>
</apex:outputPanel>
	<apex:outputPanel id="errMsgPanel">
		<script>
			function showErrorMessageCust(){
				var elem = document.getElementById('{!$Component.changeForm.validationErrMessages}');
				if(elem != null && elem.firstChild != null){
        			var ulList = elem.firstChild;
        			if(!isErrorMsg)
        			{
        			var msgvalue = ulList.firstChild.innerHTML;
        			Ext.MessageBox.show({ msg: msgvalue, buttons: Ext.MessageBox.OK});
        				isErrorMsg=true
        			}
        		}
	        }
		</script>
	</apex:outputPanel>
 <apex:outputPanel >
  <script>
    //Form customization
    function setReferenceFieldsId(){
     	<apex:repeat value="{!referenceFieldMap}" var="y">
                       var hiddenId = document.getElementById('{!referenceFieldMap[y].idForId}');
                       var referenceFieldNameEle = document.getElementById('{!referenceFieldMap[y].idForName}');
                       if(hiddenId!= null && typeof(hiddenId) != 'undefined'){
                            hiddenId.nextSibling.nextSibling.previousSibling.value = hiddenId.value;
                            referenceFieldNameEle.previousSibling.previousSibling.value = referenceFieldNameEle.value;
                       }
        </apex:repeat>
    }
  </script>
  <apex:form id="changeForm" onsubmit="setReferenceFieldsId();">
  	<c:ValidationComponent errorMsgList="{!changeBean.messageString}" id="validationComponent"></c:ValidationComponent>
    	<apex:outputpanel id="validationErrMessages" style="display:none">
            <apex:messages />
        </apex:outputpanel>
        <apex:actionregion >
        <apex:actionFunction action="{!setSelectedClientNext}" name="setClientNext"  
            rerender="User_id_fkurgency__c,User_id_id,User_id_username,Priority__c_id_name,User_id_firstname,User_id_lastname, Urgency__c_id_name,panelId" oncomplete="FetchUrgencyHTTP();DisableCIExpBtn();converdisabletoreadonly(); ">
            <apex:param assignTo="{!savedID}" name="savedID" value=""/>
        </apex:actionFunction>
        </apex:actionregion> 
        <apex:actionregion >
         <apex:actionFunction action="{!setSelectedStatusNext}" name="setStatusNext" rerender="Status__c_id_name,Status__c_id_id" onComplete="autoAssignToMyself();">
                <apex:param assignTo="{!savedID}" name="savedID" value=""/> 
         </apex:actionFunction> 
        </apex:actionregion>
        <apex:actionregion >
        <apex:actionFunction action="{!setSelectedImpactNext}" name="openImpactLookup" rerender="Impact__c_id_name,Impact__c_id_id,Priority__c_id_name" onComplete="autoAssignToMyself();">
                <apex:param assignTo="{!savedID}" name="savedID" value=""/> 
        </apex:actionFunction> 
        </apex:actionregion>
        <apex:actionregion >
         <apex:actionFunction action="{!setSelectedUrgencytNext}" name="openUrgencyLookup"  
                rerender="Impact__c_id_id,Urgency__c_id_id,Urgency__c_id_name,Priority__c_id_name" oncomplete="converdisabletoreadonly(); ">
                <apex:param assignTo="{!savedID}" name="savedID" value=""/>
         </apex:actionFunction>  
         </apex:actionregion>
         <apex:actionregion > 
    		<apex:actionFunction action="{!deleteChangeRequest}" name="deleteChangeRequest" rerender="errorId,validationComponent,afterSavDelCloseReopen" oncomplete="completeDelete();refreshparentList();refreshRelatedPortlets();"/>
    	</apex:actionregion>
    	<apex:actionregion >
    		<apex:actionFunction action="{!reset}" name="resetChangeRequest" rerender="changeFormPanel,tablePanel,PanelbarOutputPanel,staffPopupID,titlePanel,RespondedDateTime1,RespondedDateTime2,RespondedDateTime3" oncomplete="updateInactive();updateTitle();renderAddNoteButton();handleResetChange();handleElemEvent(); resetSupportingInformation(false);"/>
    	</apex:actionregion>
    	<apex:actionFunction name="save" action="{!save}" reRender="errorId,tablePanel,mainPanelDates1,mainPanelDates2,dormantDates1,dormantDates2,afterSaveId,changeFormPanel,validationComponent,titlePanel,assignedToPanel,detailsPanel,panelId,staffPopupID,staffHiddeninput,Priority__c_id_name,closeCommentIconID,CloseDateTime1,CloseDateTime2,CloseDateTime3,changeInactivePanel,afterSavDelCloseReopen, openDateTimeId, ChangeChatterFeedComponent, validationErrMessages, RespondedDateTime1,RespondedDateTime2,RespondedDateTime3,staff_queue,dataPanel" onComplete="hideWaitImg();enableCustomAction();changeMenuHandler('{!changeBean.assignMyselfState}','{!changeBean.changeReqObj.Id}','{!changeBean.closeState}');refreshRelatedPortlets();handleSave();showError();resetSupportingInformation(true);afterResetSI();renderAddNoteButton();updateTitle();handleElemEvent();buttonValidators();refreshparentList();showErrorMessageCust();">
        	<apex:param assignTo="{!changeBean.changeReqObj.Inactive__c}" name="savedName" value=""/>
    	</apex:actionFunction>
		<apex:actionRegion >    	         
    	<apex:actionFunction name="assignChangeTOStaff" action="{!assignChangeTOStaff}" reRender="assignedToPanel,change_firstname__c,change_lastname__c,change_profile__c,change_phone__c,change_extension__c,staffPopupID,staffHiddeninput,staff_queue" oncomplete="waitMsg.hide();enableMyself();"> 
         	<apex:param assignTo="{!changeBean.savedId}" name="savedName" value=""/>
    	</apex:actionFunction>
		</apex:actionRegion>
		<apex:actionRegion >
	    	<apex:actionFunction action="{!assignChangeTOMyself}" name="assignTOMyself" reRender="change_firstname__c,change_lastname__c,change_profile__c,change_phone__c,change_extension__c,staffPopupID,staffHiddeninput,staff_queue" oncomplete="waitMsg.hide();disableMyself();"/>
	    </apex:actionRegion>
	    <apex:actionRegion >
	    	<apex:actionFunction action="{!reopenChange}" name="reopenChange" rerender="changeFormPanel,afterSavDelCloseReopen,afterSaveId,Status__c_id_name,Status__c_id_id,titlePanel,CloseDateTime1,CloseDateTime2,CloseDateTime3,titlePanel" oncomplete="refreshRelatedPortlets();updateTitle();handleElemEvent();resetSupportingInformation(false);buttonValidators();renderAddNoteButton();refreshparentList();"/>
	    </apex:actionRegion>
	    <apex:actionRegion >
	    	<apex:actionFunction name="saveNote" action="{!saveNote}" rerender="validationErrMessages,panelId,errorId" oncomplete="afterAddNote();renderChangeNote();showErrorMessageCust();" >
	    		<apex:param assignTo="{!changeBean.changeNote}" name="changeNote" value=""/>
	    		<apex:param assignTo="{!changeBean.changeDuration}" name="changeDuration" value=""/>
	    	</apex:actionFunction>
	    </apex:actionRegion>	
		<apex:actionRegion >
	    <apex:actionFunction action="{!nextBtnHandler}" name="nextChangeBtnHandler" rerender="titlePanel,tablePanel,pbarId,afterSaveId,closeCommentIconID,panelId,changeInactivePanel,CloseDateTime1,CloseDateTime2,CloseDateTime3,RespondedDateTime1,RespondedDateTime2,RespondedDateTime3" onComplete="menuHandler();updateTitle();handleResetChange();handleElemEvent();renderSIComponent();handleSave();buttonValidators();"> 
	        <apex:param assignTo="{!changeBean.tempString}" name="idSetString" value=""/>          
	    </apex:actionFunction>
	    </apex:actionRegion>
	    <apex:actionRegion >
	    	<apex:actionFunction action="{!previousBtnHandler}" name="previousChangeBtnHandler" rerender="titlePanel,tablePanel,pbarId,afterSaveId, closeCommentIconID,panelId,changeInactivePanel,CloseDateTime1,CloseDateTime2,CloseDateTime3,RespondedDateTime1,RespondedDateTime2,RespondedDateTime3" onComplete="menuHandler();updateTitle();handleResetChange();handleElemEvent();renderSIComponent();handleSave();buttonValidators();"> 
	        	<apex:param assignTo="{!changeBean.tempString}" name="idSetString" value=""/>  
	    	</apex:actionFunction>
	    </apex:actionRegion>
		<apex:actionRegion >
	    <apex:actionFunction name="fetchChangeTemplates" action="{!fetchChangeTemplates}"  rerender="repeatId, dependentPanel ,Priority__c_id_name,assignedToPanel,staffHiddeninput,staffPopupID,change_firstname__c,change_lastname__c,change_profile__c,change_phone__c,change_extension__c,staff_queue" onComplete="renderAddNoteButton();"> 
	         <apex:param assignTo="{!changeBean.templateId}" name="savedName" value=""/>
	    </apex:actionFunction>
		</apex:actionRegion>
		<apex:actionregion >
	    <apex:actionFunction name="setAssignedTo" action="{!setAssignedTo}" rerender="assignedToPanel,staffHiddeninput,staffPopupID,change_firstname__c,change_lastname__c,change_profile__c,change_phone__c,change_extension__c,staff_queue" > 
	         <apex:param assignTo="{!changeBean.savedId}" name="savedName" value=""/>
	    </apex:actionFunction>
	    </apex:actionregion>
	    <apex:actionregion >
			<apex:actionFunction name="assignChangeTOQueue" action="{!assignChangeTOQueue}" rerender="assignedToPanel,change_firstname__c,change_lastname__c,change_profile__c,change_phone__c,change_extension__c,staffPopupID,staffHiddeninput,staff_queue" onComplete="waitMsg.hide();enableMyself();"> 
	        	<apex:param assignTo="{!changeBean.savedId}" name="savedName" value=""/>
	      	</apex:actionFunction>
		</apex:actionregion>
	    <apex:actionregion >
	    <apex:actionFunction name="setCloseChangeRequest" action="{!setSelectedCloseChangeRequest}" rerender="tablePanel,PanelbarOutputPanel,CloseDateTime2,closeCommentsPopupID,afterSaveId,titlePanel,afterSavDelCloseReopen" oncomplete="updateTitle();handleElemEvent();resetSupportingInformation(false);buttonValidators();refreshparentList();" >  
	                  <apex:param assignTo="{!savedID}" name="selectedClosedByUserId" value=""/>
	     </apex:actionFunction>  
	     </apex:actionregion>   
	     <apex:actionregion >
	     <apex:actionFunction action="{!respondedAction}" name="respondedBtnHandler" rerender="RespondedDateTime1,RespondedDateTime2,RespondedDateTime3"/>
         </apex:actionregion>      
      
    <div id="capsule" class="CapsuleDiv1">
        <table cellpadding="0" cellspacing="0" class="clsMainTableSI">
            <tr class="clsRowGreyBg">
                <td >
                    <div id="btnToolbar"  ></div>
                 </td>
            </tr>
             <tr >
                     <td >
                         <apex:outputPanel id="dataPanel">
                            <table  cellpadding="0" cellspacing="0" class="clsTable">  
                                <tr >
                                    <td class="clsTopAlignment75">
                                        <apex:outputPanel id="tablePanel">
                                        	<table cellpadding="0" cellspacing="0" class="clsTable">
                                                <tr>
                                                <td valign="top">
                                                    <table cellpadding="0" cellspacing="0">
                                                    <tr>
                                                        <td colspan="3" height="15" style="*height: 10px;"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="clsInputLabelTD" ><apex:outputLabel value="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__Initiator_Last_Name__c.label}"/></td>
                                                        <td class="clsInputTextBoxTD">
                                                        <apex:inputText disabled="false" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__Initiator_Last_Name__c.InlineHelpText}" value="{!changeBean.clientLastName}" id="User_id_lastname" StyleClass="clsInputTextBox"  tabindex="501" onKeyUp="findClients('sel3','autocompleteClientLNameDiv',this,event)" onblur="disableDiv('autocompleteClientLNameDiv');showDataCommon(event,FetchUrgencyHTTP,escape('IsActive = true'));" />
                                                        
                                                            <div id='autocompleteClientLNameDiv' class="clsAutocompleteDiv">
                                                                <select id="sel3" class="clsAutocompleteSelectOption" multiple="multiple" onmousedown="isAutocomplete = true;" onClick="SelectValue(this,'autocompleteClientLNameDiv');" >
                                                                </select>
                                                            </div>
                                                        </td>
                                                        <td class="lookupIconTD">
                                                        <div class="lookUpIconDiv">
                                                            <input type="button" id="lastnameLookup" onclick="if(!inProgress) {openPopup('SearchPage?popupId=Client&isLookup=true',setClientNext);}" class="lookupIconOn"  tabindex="502" />
                                                        </div>
                                                       </td>
                                                    </tr>
                                                    <tr>
                                                      <td class="clsInputLabelTD" ><apex:outputLabel value="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__Initiator_First_Name__c.label}"/></td>
                                                      <td class="clsInputTextBoxTD">
                                                      <apex:inputText disabled="false" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__Initiator_First_Name__c.InlineHelpText}" value="{!changeBean.clientFirstName}"  id="User_id_firstname" StyleClass="clsInputTextBox"  tabindex="503" onKeyUp="findClients('sel4','autocompleteClientFNameDiv',this,event)"  onblur="disableDiv('autocompleteClientFNameDiv');showDataCommon(event,FetchUrgencyHTTP,escape('IsActive = true'));"/>
                                                        
                                                            <div id='autocompleteClientFNameDiv' class="clsAutocompleteDiv">
                                                                <select id="sel4" class="clsAutocompleteSelectOption" multiple="multiple" onmousedown="isAutocomplete = true;" onClick="SelectValue(this,'autocompleteClientFNameDiv');" >
                                                                </select>
                                                            </div>
                                                      </td>
                                                      <td class="lookupIconTD">
                                                        <div class="lookUpIconDiv">
                                                            <input type="button" id="firstnameLookup" onclick="if(!inProgress) {openPopup('SearchPage?popupId=Client&isLookup=true',setClientNext);}" class="lookupIconOn"  tabindex="504"  />
                                                        </div>
                                                       </td>
                                                 </tr>
                                                 <tr>
                                                    <td class="clsInputLabelTD"><apex:outputLabel value="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKInitiator__c.label}" /><span class="clsRequiredBlack">&nbsp;*</span></td>
                                                        <td class="clsInputTextBoxTD">
                                                        <apex:inputText title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKInitiator__c.InlineHelpText}" value="{!changeBean.clientName}" styleClass="clsInputTextBox"  id="User_id_username" tabindex="505" onKeyUp="findClients('sel5','autocompleteClientUNameDiv',this,event)" onblur="disableDiv('autocompleteClientUNameDiv'); showDataCommon(event,FetchUrgencyHTTP,escape('IsActive = true'));"/>
                                                            <div id='autocompleteClientUNameDiv' class="clsAutocompleteDiv">
                                                                <select id="sel5" class="clsAutocompleteSelectOption" multiple="multiple" onmousedown="isAutocomplete = true;" onClick="SelectValue(this,'autocompleteClientUNameDiv');" >
                                                                </select>
                                                            </div>
                                                        <apex:inputhidden id="User_id_id" value="{!changeBean.fkInitiator}"/><apex:inputhidden id="User_id_fkurgency__c"  value="{!changeBean.clientUrgency}"/>
                                                        </td>
                                                        <td class="lookupIconTD">
                                                        <div class="lookUpIconDiv">
                                                            <input type="button" id="initiatornameLookup" onclick="if(!inProgress) {openPopup('SearchPage?popupId=Client&isLookup=true',setClientNext);}" class="lookupIconOn"  tabindex="506"  />
                                                        </div>
                                                       </td>
                                                 </tr>
                                                <tr style="{!categoryShowStyle}">
                                                    <td class="clsInputLabelTD" >
                                                        <apex:outputLabel value="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKCategory__c.label}"/><apex:outputLabel value=" *" styleClass="clsRequiredBlack" rendered="{!changeBean.categoryRequired}"/>
                                                     </td>
                                                     <td class="clsInputTextBoxTD">
                                                         <apex:inputText id="Category__c_id_name" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKCategory__c.InlineHelpText}"  value="{!changeBean.fCategoryIdStr}"   styleClass="clsInputTextBox" tabindex="507" onKeyUp="findIt('sel2','autocompleteCategoryDiv',this,event)" onblur="showDataCommon(event,FetchUrgencyHTTP,escape('inactive__c = false')); disableDiv('autocompleteCategoryDiv'); "/> 
                                                         <div id='autocompleteCategoryDiv' class="clsAutocompleteDiv">
                                                            <select id="sel2" class="clsAutocompleteSelectOption" multiple="multiple" onmousedown="isAutocomplete = true;" onClick="SelectValue(this,'autocompleteCategoryDiv');" />
                                                        </div>
                                                         <apex:inputhidden id="Category__c_id_id" value="{!changeBean.fkCategory}"/>
                                                         <apex:inputhidden id="Category__c_id_fkurgency__c" />
                                                         <apex:inputHidden id="priorityNameVal" value="{!changeBean.priorityName}"/>
                                                         
                                                      </td>
                                                      <td class="lookupIconTD">
                                                         <div class="lookUpIconDiv"><input type="button" id="categoryLookup" class="lookupIconOn"  onClick="if(!inProgress) {openPopup('CategorySearchPage?isLookup=true&isSD=true&showFooterPanel=false',openCategoryLookup);}" tabindex="508"/></div>
                                                      </td>
                                                   </tr>
                                                    </table>
                                                </td>
                                                <td valign="top">
                                                    <table cellpadding="0" cellspacing="0">
                                                    	<tr>
                                                        	<td colspan="3" height="15" style="*height: 10px;"></td>
                                                    	</tr>
                                                        <tr>
                                                            <td>
                                                                <apex:repeat value="{!$ObjectType.BMCServiceDesk__Change_Request__c.FieldSets.BMCServiceDesk__DormantFieldSet}" var="dormantFieldSetVar">
                                                                	<apex:outputPanel rendered="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].accessible}" >
                                                                    <apex:outputPanel rendered="{!NOT(OR(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type,'area'),CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type,'multipicklist')))}" >
                                                                    <!-- <apex:outputPanel rendered="{!CASE(TEXT($ObjectType.Change_Request__c.fields[dormantFieldSetVar].localname),'Closed_Date_Time__c', TEXT(NOT(OR(ISBLANK(TRIM(changeBean.closeDate)),ISNULL(changeBean.closeDate)))), 'FKServiceRequest__c', TEXT(NOT(OR(ISBLANK(TRIM(changeBean.requestDetailName)),ISNULL(changeBean.requestDetailName)))), 'true')}" >  -->
                                                                    <apex:outputPanel rendered="{!IF(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].localname,'Closed_Date_Time__c'), NOT(OR(ISBLANK(TRIM(changeBean.closeDate)),ISNULL(changeBean.closeDate))), IF(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].localname,'FKServiceRequest__c'),NOT(OR(ISBLANK(TRIM(changeBean.requestDetailName)),ISNULL(changeBean.requestDetailName))), true))}">
                                                                       <table width="370" cellspacing="0" cellpadding="0" class="clsFieldSetMainFormTable" >
                                                                        <tr>
                                                                            <td class="clsFieldSetMainFormLabelTD" style="width:35%">{!$ObjectType.Change_Request__c.fields[dormantFieldSetVar].label}
                                                                            <apex:outputPanel rendered="{!fieldIsRequired[dormantFieldSetVar]}">
																			<span class="clsRequiredBlack">*</span>
																			</apex:outputPanel></td>
                                                                            <td class="clsFieldSetMainFormTextBoxTD"  title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].inlineHelpText}" style="width:65%">
                                                                            
                                                                            <!-- For Reference Fields -->
                                                                            <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type,'reference')}" >
                                                                              <apex:outputPanel rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].localname,'FKServiceRequest__c'))}">
                                                                                <apex:inputText value="{!referenceFieldMap[$ObjectType.BMCServiceDesk__Change_Request__c.Fields[dormantFieldSetVar].localname].value}"   style="display:none"/>
                                                                                <input type="text"  value="{!changeBean.changeReqObj[referenceFieldMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].referenceNameField][referenceFieldMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].referenceNameFieldSec]}" id="{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].idForName}" onblur="isAutocomplete = false; resetReferenceFields(this); {!IF(referenceFieldMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].hasInActiveField, 'showDataCommonTest(event);' , 'showDataCommon(event,null,null);')}" class="clsInputTextBox" />
                                                                                <input type="text"  value="{!changeBean.changeReqObj[dormantFieldSetVar]}" id="{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].idForId}" style="display:none" />
                                                                                <apex:inputText value="{!changeBean.changeReqObj[dormantFieldSetVar]}"   id="referenceId" style="display:none"/>
                                                                                <input type="button" rendered="{!IF(OR(NOT(changeBean.isChangeCreatable),readOnlyMap[dormantFieldSetVar]) , false,true)}" class="lookupIconOn" tabindex="501" style="{!IF(contains($ObjectType.Change_Request__c.Fields[dormantFieldSetVar].type, "reference"), 'display:inline', 'display:none')}" onclick="if(!inProgress) {openLookupPopup(this,'{!$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname}','Change_Request__c'); return false;}" />
                                                                                 <script>
                                                                                            var dorDetailEleValue = document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].idForName}').previousSibling.previousSibling.value;
                                                                                            if(dorDetailEleValue  == "" || dorDetailEleValue == null)
                                                                                                document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].idForName}').value = '{!JSENCODE(changeBean.changeReqObj[referenceFieldMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].referenceNameField][referenceFieldMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].referenceNameFieldSec])}';
                                                                                            else
                                                                                                document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].idForName}').value = dorDetailEleValue; 
                                                                                </script>
                                                                             </apex:outputPanel>
                                                                             	<apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].localname,'FKServiceRequest__c')}">
				                                                               	  <table class="clsPanelInputTextboxReadOnly clsHyperLinkStyle" cellpadding="0" cellspacing="0" style="width: 200px;padding-left: 5px;"><tr><td>
					                                                              	<a id="Incident__c_id_name" onclick="OpenServiceRequest('IncidentPage')" href="#">{!JSENCODE(changeBean.requestDetailName)}</a>
					                                                              	<apex:inputhidden id="Incident__c_id_id" value="{!changeBean.changeReqObj.BMCServiceDesk__FKServiceRequest__c}"/>
					                                                              	</td></tr></table>
					                                                         	</apex:outputPanel>
                                                                             </apex:outputPanel>
                                                                             <!-- For Non Reference Fields -->
                                                                             <apex:outputPanel rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type,'reference'))}">
                                                                                
                                                                                <!-- For Date Fields And Change is Creatable-->
                                                                                <apex:outputPanel rendered="{!AND(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type,'date'), changeBean.isChangeCreatable)}" id="dormantDates1">
                                                                                	<apex:outputPanel rendered="{!NOT(OR(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].localName, 'Closed_Date_Time__c'),CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].localName, 'Responded_Date__c')))}" >
                                                                                	<apex:inputField rendered="{!NOT(readOnlyMap[dormantFieldSetVar])}" value="{!changeBean.changeReqObj[dormantFieldSetVar]}" styleClass="clsInputTextBox" onclick="setDatePickerPosition('{!$ObjectType.BMCServiceDesk__Change_Request__c.Fields[dormantFieldSetVar].type}',event)" />
																					<apex:outputPanel layout="block" styleClass="clsOutputPanelReadOnly" rendered="{!readOnlyMap[dormantFieldSetVar]}" >
                                                                                    <apex:inputField id="readOnlyDate1" rendered="{!readOnlyMap[dormantFieldSetVar]}" value="{!changeBean.changeReqObj[dormantFieldSetVar]}" styleClass="clsCustomInputFieldReadOnly" />
                                                                                    <script>var dateField = document.getElementById('{!$Component.readOnlyDate1}'); if(dateField != null && dateField != 'undefined'){dateField.disabled = true}</script>
																					</apex:outputPanel>
                                                                                </apex:outputPanel>
																				<apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].localName, 'Closed_Date_Time__c')}" id="CloseDateTime1">
	                                                                    			   	<table cellpadding="0" cellspacing="0"><tr><td>
	                                                                    					<apex:inputField id="closeDate1" value="{!changeBean.changeReqObj[dormantFieldSetVar]}" styleClass="clsPanelInputTextboxReadOnly" style="width : 195px;"/>
	                                                                    					<script>var dateField = document.getElementById('{!$Component.closeDate1}'); if(dateField != null && dateField != 'undefined'){dateField.disabled = true}</script>
	                                                                    				</td><td>
	                                                                     					<button type ="button" id="fieldInfobtn2" style="{!IF(changeBean.closeState,'display:block','display:none')}" class="commentsInfoTooltip" onmouseover="showInfoPopup(event,'closeCommentsPopupDiv','closeComments');" onmouseout="fieldInfo_out(this);"/>
	                                                                			 		</td></tr></table>	
	                                                                    			</apex:outputPanel>
	                                                                    			<apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].localName, 'Responded_Date__c')}" id="RespondedDateTime1">
					                                                                   <table cellpadding="0" cellspacing="0"><tr><td>
					                                                                    <apex:inputField id="respondedDate1" value="{!changeBean.changeReqObj[dormantFieldSetVar]}" styleClass="clsPanelInputTextboxReadOnly" style="width : 195px;" onfocus="this.blur()" />
					                                                                    <script>var dateField = document.getElementById('{!$Component.respondedDate1}'); if(dateField != null && dateField != 'undefined'){dateField.disabled = true}</script>
					                                                                    </td><td></td>
					                                                                    </tr></table>	
					                                                                </apex:outputPanel>
	                                                                			</apex:outputPanel>
                                                                                
                                                                                <!-- For Date Fields And Change Not is Creatable-->
                                                                                <apex:outputPanel rendered="{!AND(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type,'date'), NOT(changeBean.isChangeCreatable))}" id="dormantDates2">
                                                                                    <table cellpadding="0" cellspacing="0"><tr><td class="clsPanelReadOnlyInputTextbox">
                                                                                        <apex:inputField value="{!changeBean.changeReqObj[dormantFieldSetVar]}" styleClass="clsPanelInputTextboxReadOnly"  onclick="disableMe(this);"/>
                                                                                     </td></tr></table>
                                                                                </apex:outputPanel> 
                                                                                
                                                                                <!-- For Fields which are not of type Date/Reference/Area-->
                                                                                <apex:outputPanel rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type,'date'))}" >
                                                                                    <apex:outputPanel rendered="{!changeBean.isChangeCreatable}">
                                                                                   <apex:outputPanel layout="block" styleClass="{!IF(readOnlyMap[dormantFieldSetVar],'clsOutputPanelReadOnly','')}">
                                                                                        <input type="hidden"  value="{!changeBean.changeReqObj[dormantFieldSetVar]}" id="{!otherFieldsMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].idForName}" inFieldSet="true"/>
                                                                                        <apex:inputField value="{!changeBean.changeReqObj[dormantFieldSetVar]}" styleClass="{!IF(readOnlyMap[dormantFieldSetVar], 'clsCustomInputFieldReadOnly',IF(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.Fields[dormantFieldSetVar].type,'boolean'),'clsInputCheckBoxCustom','clsInputTextBox'))}" />
                                                                                     </apex:outputPanel> 
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel rendered="{!NOT(changeBean.isChangeCreatable)}">
                                                                                    	<apex:outputPanel layout="block"  rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type,'boolean')}" styleclass="">
                                                                                            <apex:inputField value="{!changeBean.changeReqObj[dormantFieldSetVar]}" />
                                                                                        </apex:outputPanel>
                                                                                        <apex:outputPanel layout="block"  rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type,'boolean'))}" styleclass="">
                                                                                            <apex:inputField value="{!changeBean.changeReqObj[dormantFieldSetVar]}" styleClass="clsCustomInputFieldReadOnly"/>
                                                                                        </apex:outputPanel>
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                </td>
                                                                                <td></td>
                                                                                </tr>
                                                                                </table>
                                                                                </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                <!-- For Area Fields -->
                                                                                <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type,'area')}">
                                                                                <table width="370" cellspacing="0" cellpadding="0" class="clsFieldSetMainFormTable">
                                                                                    <tr>
                                                                                        <td class="clsInputBoldLabelTableFirstRowTD">{!$ObjectType.Change_Request__c.fields[dormantFieldSetVar].label}
                                                                                         <apex:outputPanel rendered="{!fieldIsRequired[dormantFieldSetVar]}">
																			<span class="clsRequiredBlack">*</span>
																			</apex:outputPanel></td>
                                                                                    </tr>
                                                                                    <tr>
	                                                                                    <td class="clsInputTextAreaTD clsRightPadTD" colspan="2">
																							<div class="clsRelativePosition">
																								<input type="hidden" value="{!changeBean.changeReqObj[dormantFieldSetVar]}" id="{!otherFieldsMap[$ObjectType.Change_Request__c.Fields[dormantFieldSetVar].localname].idForName}"  inFieldSet="true"/>
																								<apex:inputTextarea id="inputTextareaId" value="{!changeBean.changeReqObj[dormantFieldSetVar]}" styleClass="clsInputTextArea"  onBlur="validateMe(this,'{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type}');" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].inlineHelpText}"/>
																							</div>
																						</td>
																						<td class="clsInputTextAreaTD" style="vertical-align:top;" >
																							<input type="button" id="inputTxtAreaButton" class="TextboxPopupIcon" style="display:inline" onclick="viewTextEditor(this  ,'{!$ObjectType.Change_Request__c.fields[dormantFieldSetVar].label}', '{!$ObjectType.Change_Request__c.fields[dormantFieldSetVar].length}', '{!JSENCODE($Label.OK)}', '{!JSENCODE($Label.Cancel)}');"/>
																						</td>
																					</tr>                                                                           
                                                                                    </table>    
                                                                        </apex:outputPanel>
											                             <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].type,'multipicklist')}" >
											                              <table cellspacing="0" cellpadding="0" width="370">
											                                <tr>
											                                    <td class="clsFieldSetMainFormLabelTD">{!$ObjectType.Change_Request__c.fields[dormantFieldSetVar].label}</td>
											                                 </tr>   
											                                <tr>
											                                    <td class="multiPickListClsTD">
											                                     <apex:inputField value="{!changeBean.changeReqObj[dormantFieldSetVar]}" styleClass="multiPickListCls"/>
											                                                   
											                                    
											                                    </td>
											                                        
											                                </tr>
											                                </table> 
											                             </apex:outputPanel>
																		  <script>                                        
                                                                         if({!$ObjectType.BMCServiceDesk__Change_Request__c.fields[dormantFieldSetVar].accessible}){
                                                                             isDormantSection = true;
                                                            }
                                                        </script>
                                                                        </apex:outputPanel> 
                                                                     </apex:repeat>  
                                                                
                                                                
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                                </tr>
                                                 
                                                 
                                                 
                                             </table>
                     <table cellpadding="0" cellspacing="0">
                        <tr>
                            <td height="10"></td>
                        </tr>
                        <tr>
                            <td style="padding-left: 5px"><input type="button" id="changeDescriptionBtn" class="changeBtnCls" title = "{!$ObjectType.Change_Request__c.fields.Change_Description__c.label}" value="{!$ObjectType.Change_Request__c.fields.Change_Description__c.label}" style="font-weight:bold" onclick="displayActiveTextArea(this,32000);" /></td>
                                                        <td><input type="button" id="reasonForChangeBtn" style="width:112px" class="changeBtnCls" title = "{!$ObjectType.Change_Request__c.fields.Reason_for_Change__c.label}" value="{!$ObjectType.Change_Request__c.fields.Reason_for_Change__c.label}" onclick="displayActiveTextArea(this,255);"/></td>
                                                        <td><input type="button"  id="rolloutPlanBtn" class="changeBtnCls" style="width:78px" title = "{!$ObjectType.Change_Request__c.fields.Roll_Out_Plan__c.label}" value="{!$ObjectType.Change_Request__c.fields.Roll_Out_Plan__c.label}" onclick="displayActiveTextArea(this,255);"/></td>
                                                        <td><input type="button" id="backoutPlanBtn" class="changeBtnCls" style="width:85px"  title = "{!$ObjectType.Change_Request__c.fields.Back_Out_Plan__c.label}"  value="{!$ObjectType.Change_Request__c.fields.Back_Out_Plan__c.label}" onclick="displayActiveTextArea(this,255);"/></td>
                                                    </tr>
                                                
                                                </table>   
                     <table width="100%" cellpadding="0" cellspacing="0" class="clsFieldSetMainFormTable">
                                               <tr>
                                  <td height="5"></td>
                                  
                                                    </tr>
                                                    <tr >
                            <td style="padding-left: 10px;" class="clsInputTextAreaTD">
                               
                                                        <apex:inputTextarea id="change_Change_Description__c" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__Change_Description__c.InlineHelpText}" value="{!changeBean.changeDescription}" styleClass="clsInputTextArea" tabindex="509" style="display:block;widht:330px;"/>
                                                        <apex:inputTextarea id="change_Roll_Out_Plan__c" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__Roll_Out_Plan__c.InlineHelpText}" value="{!changeBean.rolloutPlan}" styleClass="clsInputTextArea" tabindex="509" style="display:none;widht:330px;" />
                                                        <apex:inputTextarea id="change_Reason_for_Change__c" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__Reason_for_Change__c.InlineHelpText}" value="{!changeBean.reasonforChange}" styleClass="clsInputTextArea" tabindex="509" style="display:none;widht:330px;"/>
                                                        <apex:inputTextarea id="change_Back_Out_Plan__c" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__Back_Out_Plan__c.InlineHelpText}" value="{!changeBean.backoutplan}" styleClass="clsInputTextArea" tabindex="509" style="display:none;widht:330px;" />
                           
                                                    </td>
                                                    <td class="clsInputTextAreaTD" style="vertical-align:top;">
                                                        <div class="lookUpIconDiv"><input type="button" class="TextboxPopupIcon" onclick="showTextEditor(activeTextAreaId, activeBtnTitle,txtSize, labelOK, labelCancel);"/></div></td>
                                                 </tr>
                                                 </table>
                                                 
                                                   <apex:repeat value="{!$ObjectType.BMCServiceDesk__Change_Request__c.FieldSets.BMCServiceDesk__mainPanel}" var="mainPanelVar">
                                                   <apex:outputPanel rendered="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].accessible}" >
												     <apex:outputPanel rendered="{!NOT(OR(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type,'area'),CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type,'multipicklist')))}" >
												       <apex:outputPanel rendered="{!IF(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].localname,'Closed_Date_Time__c'), NOT(OR(ISBLANK(TRIM(changeBean.closeDate)),ISNULL(changeBean.closeDate))), IF(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].localname,'FKServiceRequest__c'),NOT(OR(ISBLANK(TRIM(changeBean.requestDetailName)),ISNULL(changeBean.requestDetailName))), true))}">		
                                                       <table width="370" cellspacing="0" cellpadding="0" class="clsFieldSetMainFormTable" >
                                                        <tr>
                                                            <td class="clsFieldSetMainFormLabelTD" style="width:35%">{!$ObjectType.Change_Request__c.fields[mainPanelVar].label}
                                                             <apex:outputPanel rendered="{!fieldIsRequired[mainPanelVar]}">
																			<span class="clsRequiredBlack">*</span>
																			</apex:outputPanel></td>
                                                            <td class="clsFieldSetMainFormTextBoxTD"  title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].inlineHelpText}" style="width:65%">
                                                            
                                                            <!-- For Reference Fields -->
                                                            <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type,'reference')}" >
                                                            <apex:outputPanel rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].localname,'FKServiceRequest__c'))}">
                                                                <apex:inputText value="{!referenceFieldMap[$ObjectType.BMCServiceDesk__Change_Request__c.Fields[mainPanelVar].localname].value}"   style="display:none"/>
                                                                <input type="text"  value="{!changeBean.changeReqObj[referenceFieldMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].referenceNameField][referenceFieldMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].referenceNameFieldSec]}" id="{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].idForName}" onblur="isAutocomplete = false; resetReferenceFields(this); {!IF(referenceFieldMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].hasInActiveField, 'showDataCommonTest(event);' , 'showDataCommon(event,null,null);')}"  class="clsInputTextBox" />
                                                                <input type="text"  value="{!changeBean.changeReqObj[mainPanelVar]}" id="{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].idForId}" style="display:none"/> 
                                                                <apex:inputText value="{!changeBean.changeReqObj[mainPanelVar]}"   id="referenceId" style="display:none"/>
                                                                <input type="button" rendered="{!IF(OR(NOT(changeBean.isChangeCreatable),readOnlyMap[mainPanelVar]) , false,true)}" class="lookupIconOn" id="lastnameLookup_Id" tabindex="501" style="{!IF(contains($ObjectType.Change_Request__c.Fields[mainPanelVar].type, "reference"), 'display:inline', 'display:none')}" onclick="if(!inProgress) {openLookupPopup(this,'{!$ObjectType.Change_Request__c.Fields[mainPanelVar].localname}','Change_Request__c'); return false;}" />
                                                                 <script>
                                                                            var dorDetailEleValue = document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].idForName}').previousSibling.previousSibling.value;
                                                                            if(dorDetailEleValue  == "" || dorDetailEleValue == null)
                                                                                document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].idForName}').value = '{!JSENCODE(changeBean.changeReqObj[referenceFieldMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].referenceNameField][referenceFieldMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].referenceNameFieldSec])}';
                                                                            else
                                                                                document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].idForName}').value = dorDetailEleValue; 
                                                                </script>
                                                             </apex:outputPanel>
                                                             <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].localname,'FKServiceRequest__c')}">
                                                               	  <table class="clsPanelInputTextboxReadOnly clsHyperLinkStyle" cellpadding="0" cellspacing="0" style="width: 205px;padding-left: 5px;"><tr><td>
	                                                              	<a id="Incident__c_id_name" onclick="OpenServiceRequest('IncidentPage')" href="#">{!JSENCODE(changeBean.requestDetailName)}</a>
	                                                              	<apex:inputhidden id="Incident__c_id_id" value="{!changeBean.changeReqObj.BMCServiceDesk__FKServiceRequest__c}"/>
	                                                              	</td></tr></table>
	                                                            </apex:outputPanel>
                                                             </apex:outputPanel>
                                                             
                                                             <!-- For Non Reference Fields -->
                                                             <apex:outputPanel rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type,'reference'))}">
                                                                
                                                                <!-- For Date Fields And Change is Creatable-->
                                                                <apex:outputPanel rendered="{!AND(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type,'date'), changeBean.isChangeCreatable)}" id="mainPanelDates1">
																<apex:outputPanel rendered="{!NOT(OR(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].localName, 'Closed_Date_Time__c'),CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].localName, 'Responded_Date__c')))}" >
                                                                    <apex:inputField rendered="{!NOT(readOnlyMap[mainPanelVar])}" value="{!changeBean.changeReqObj[mainPanelVar]}" styleClass="clsInputTextBox"  onclick="setDatePickerPosition('{!$ObjectType.BMCServiceDesk__Change_Request__c.Fields[mainPanelVar].type}',event)"/>
																														<apex:outputPanel layout="block" styleClass="clsOutputPanelReadOnly" rendered="{!readOnlyMap[mainPanelVar]}"  >
                                                    
                                                                    <apex:inputField id="readOnlyDate2" rendered="{!readOnlyMap[mainPanelVar]}" value="{!changeBean.changeReqObj[mainPanelVar]}" styleClass="clsCustomInputFieldReadOnly" style="width: 195px;"/>
                                                                    <script>var dateField = document.getElementById('{!$Component.readOnlyDate2}'); if(dateField != null && dateField != 'undefined'){dateField.disabled = true}</script>
																	</apex:outputPanel>
                                                                </apex:outputPanel>
																<apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].localName, 'Closed_Date_Time__c')}" id="CloseDateTime2">
	                                                                 <table cellpadding="0" cellspacing="0"><tr><td>
	                                                                 <apex:inputField value="{!changeBean.changeReqObj[mainPanelVar]}" styleClass="clsPanelInputTextboxReadOnly" id="closeDate2" style="width :195px;"/>
	                                                                 <script>var dateField = document.getElementById('{!$Component.closeDate2}'); if(dateField != null && dateField != 'undefined'){dateField.disabled = true}</script>
	                                                                   </td><td>
	                                                                  <button type ="button" id="fieldInfobtn1" style="{!IF(changeBean.closeState,'display:block','display:none')}" class="commentsInfoTooltip" onmouseover="showInfoPopup(event,'closeCommentsPopupDiv','closeComments');" onmouseout="fieldInfo_out(this);"/>
	                                                                </td></tr></table>	
	                                                                </apex:outputPanel>
	                                                                
	                                                                <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].localName, 'Responded_Date__c')}" id="RespondedDateTime2">
	                                                                   <table cellpadding="0" cellspacing="0"><tr><td>
	                                                                    <apex:inputField id="respondedDate2" value="{!changeBean.changeReqObj[mainPanelVar]}" styleClass="clsPanelInputTextboxReadOnly" style="width :195px;" onfocus="this.blur()" />
	                                                                    <script>var dateField = document.getElementById('{!$Component.respondedDate2}'); if(dateField != null && dateField != 'undefined'){dateField.disabled = true}</script>
	                                                                    </td><td></td>
	                                                                    </tr></table>	
	                                                                </apex:outputPanel>
	                                                             </apex:outputPanel>
                                                                
                                                                <!-- For Date Fields And Change Not is Creatable-->
                                                                <apex:outputPanel rendered="{!AND(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type,'date'), NOT(changeBean.isChangeCreatable))}" id="mainPanelDates2">
                                                                    <table cellpadding="0" cellspacing="0"><tr><td class="clsOutputPanelReadOnly">
                                                                        <apex:inputField value="{!changeBean.changeReqObj[mainPanelVar]}" styleClass="clsCustomInputFieldReadOnly" />
                                                                    </td></tr></table>
                                                                </apex:outputPanel> 
                                                                
                                                                <!-- For Fields which are not of type Date/Reference/Area-->
                                                                <apex:outputPanel rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type,'date'))}" >
                                                                    <apex:outputPanel rendered="{!changeBean.isChangeCreatable}">
                                                                    	 <apex:outputPanel layout="block" styleClass="{!IF(readOnlyMap[mainPanelVar],'clsOutputPanelReadOnly','')}">
                                                                        <input type="hidden"  value="{!changeBean.changeReqObj[mainPanelVar]}" id="{!otherFieldsMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].idForName}" inFieldSet="true"/>
                                                                        <apex:inputField value="{!changeBean.changeReqObj[mainPanelVar]}" styleClass="{!IF(readOnlyMap[mainPanelVar], 'clsCustomInputFieldReadOnly',IF(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.Fields[mainPanelVar].type,'boolean'),'clsInputCheckBoxCustom','clsInputTextBox'))}" />
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel rendered="{!NOT(changeBean.isChangeCreatable)}">
                                                                        <apex:outputPanel layout="block"  rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type,'boolean')}" styleclass="">
                                                                             <apex:inputField value="{!changeBean.changeReqObj[mainPanelVar]}" />
                                                                         </apex:outputPanel>
                                                                         <apex:outputPanel layout="block"  rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type,'boolean'))}" styleclass="clsOutputPanelReadOnly">
                                                                             <apex:inputField value="{!changeBean.changeReqObj[mainPanelVar]}" styleClass="clsCustomInputFieldReadOnly"/>
                                                                         </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                </td>
                                                                <td></td>
                                                                </tr>
                                                                </table>
                                                                </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <!-- For Area Fields -->
                                                                <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type,'area')}">
                                                                <table width="100%" cellspacing="0" cellpadding="0" class="clsFieldSetMainFormTable">
                                                                    <tr>
                                                                        <td class="clsInputBoldLabelTableFirstRowTD">{!$ObjectType.Change_Request__c.fields[mainPanelVar].label} 
                                                                        <apex:outputPanel rendered="{!fieldIsRequired[mainPanelVar]}">
																			<span class="clsRequiredBlack">*</span>
																			</apex:outputPanel></td>
                                                                        
                                                                    </tr>
                                                                    <tr>
																		<td class="clsInputTextAreaTD clsRightPadTD" colspan="2">
																		<div class="clsRelativePosition">
																		<input type="hidden" value="{!changeBean.changeReqObj[mainPanelVar]}" id="{!otherFieldsMap[$ObjectType.Change_Request__c.Fields[mainPanelVar].localname].idForName}"  inFieldSet="true"/>
																		<apex:inputTextarea id="inputTextareaId" value="{!changeBean.changeReqObj[mainPanelVar]}" styleClass="clsInputTextArea"  onBlur="validateMe(this,'{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type}');" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].inlineHelpText}"/>
																		</div>
																		</td>
																		<td class="clsInputTextAreaTD" style="vertical-align:top;" >
																		<input type="button" id="inputTxtAreaButton" class="TextboxPopupIcon" style="display:inline" onclick="viewTextEditor(this,'{!$ObjectType.Change_Request__c.fields[mainPanelVar].label}', '{!$ObjectType.Change_Request__c.fields[mainPanelVar].length}', '{!JSENCODE($Label.OK)}', '{!JSENCODE($Label.Cancel)}');"/>
																		</td>
																	</tr>
																</table>    
                                                                </apex:outputPanel>
											                             <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[mainPanelVar].type,'multipicklist')}" >
											                              <table class="multiPickListClsTable" cellspacing="0" cellpadding="0" >
											                                <tr>
											                                    <td class="clsFieldSetMainFormLabelTD">{!$ObjectType.Change_Request__c.fields[mainPanelVar].label}</td>
											                                   
											                                </tr>
											                                <tr>
											                                    <td class="multiPickListClsTD">
											                                     <apex:inputField value="{!changeBean.changeReqObj[mainPanelVar]}" styleClass="multiPickListCls"/>
											                                                   
											                                    
											                                    </td>
											                                        
											                                </tr>
											                                </table> 
											                   </apex:outputPanel>
                                                               </apex:outputPanel> 
                                                   </apex:repeat>  
                                                  
                                                   
                                                  <table cellpadding="0" cellspacing="0" class="clsTable">
                                                           <tr><td height="13" style="*height: 10px;"/></tr>
                                                    <tr>
                                                      <td style="color:#004376;font: bold 11px Tahoma, MS Sans Serif;padding-left:9px;"><apex:outputLabel value="{!$ObjectType.BMCServiceDesk__Change_History__c.fields.BMCServiceDesk__Note__c.label}"/></td>
                                                        
                                                    </tr>
                                                   <tr><td height="5" /></tr>
                                                    <tr>                
                              
                                <td  colspan="2" style="padding-left:13px;" class="clsRightPadTD">
                                    <apex:inputTextarea title="{!$Label.bmcservicedesk__tooltipnote}" value="{!changeBean.changeNote}" id="ChangeNotes" styleClass="clsInputTextAreaChange" style="margin-left:-4px;" tabindex="509" onkeyup="renderAddNoteButton();" />
                                                                </td>
                                <td width="10"/>
                                                            </tr>
                                                            <tr>
                               <td >
                               <div  class="DurationDivCls">
                                                                    <apex:outputLabel value="{!$ObjectType.BMCServiceDesk__Change_History__c.fields.BMCServiceDesk__Duration__c.label}" styleClass="clsDurationLabel"/>
                                    <apex:inputText value="{!changeBean.changeDuration}" styleClass="clsDurationTextBox" id="ChangeRequestDuration" style="margin-top:4px;" title="{!$Label.bmcservicedesk__tooltipduration}" tabindex="511" onblur="validateDuration();"/><apex:outputLabel value="{!$Label.bmcservicedesk__hhmm}" styleClass="clsTimeLabel" />
                                 </div>
                                                                </td>
                                <td align="right" >
                                <div class="AddBtnDivCls" style="">
                                    <input type="button" value="{!$Label.Add}" style="width:auto;padding:4px;padding-top:2px;" class="AddNoteButton" id="addNoteBtn" onclick="disableAddNote()" />                                                
                                </div>
                                                                </td> 
                                                            </tr>                                                             
                                                        </table>
                                  </apex:outputPanel>
                                </td> 
                                      
                                 
                              <td class="clsTopAlignment25">
                                    <div class="panelCapsule">
                                        <apex:outputPanel id="PanelbarOutputPanel">
                                            <apex:panelBar headerClass="clsRowBlueBgPanel" switchType="ajax" id="pbarId" >
                                                <apex:panelBarItem label="{!$Label.bmcservicedesk__details}" expanded="true" id="changedetail" headerClass="panelHeader" contentClass="panelContent" >
												<div id="AccordionDiv"> 
                                                    <apex:outputPanel id="detailsPanel">  
                                                        <table cellpadding="0" cellspacing="0" class="clsTable">
                                                            <tr>
                                                                <td height="15"></td>
                                                            </tr> 
                                                            <tr >
                                                                <td class="clsPanelInputLabelTD">
                                                                    <apex:outputLabel value="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKStatus__c.label}"/>
                                                                </td>
                                                                <td class="clsPanelInputTextboxTD1"> 
                                                                   <apex:inputText id="Status__c_id_name" value="{!changeBean.statusName}"  title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKStatus__c.InlineHelpText}" styleClass="clsPanelInputTextbox" onblur="showDataCommon(event,'',escape('inactive__c = false and appliesToChange__c = true'))" tabindex="511"/>
                                                                   <apex:inputhidden id="Status__c_id_id" value="{!changeBean.fkStatus}" />
                                                                </td>
                                                                <td class="lookupIconPanelTD">
                                                                    <div class="lookUpIconDiv"><input type="button" id="statusLookup" onClick="if(!inProgress) {openPopup('SearchPage?popupId=Status&isLookup=true&filterClause='+escape('inactive__c = false and appliesToChange__c = true'),setStatusNext);}" class="lookupIconOn" tabindex="512"/></div>
                                                                 </td>
                                                                 
                                                            </tr>
                                                            <tr>
                                                                <td class="clsPanelInputLabelTD"><apex:outputLabel value="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKImpact__c.label}" /></td>
                                                                <td class="clsPanelInputTextboxTD1" align="right">
                                                                <apex:inputText id="Impact__c_id_name" value="{!changeBean.impactName}" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKImpact__c.InlineHelpText}" styleClass="clsPanelInputTextbox safariAutoComplete" tabindex="514" onKeyUp="findIt('sel','autocompleteImpactDiv',this,event)"  onblur="disableDiv('autocompleteImpactDiv');showDataCommon(event,FetchPriorityHTTP,escape('inactive__c = false'));"/>
                                                                        <apex:inputhidden id="Impact__c_id_id" value="{!changeBean.fkImpact}"/>  
                                                                <div id='autocompleteImpactDiv' class="clsPanelAutocompleteDiv">
                                                                    <select id="sel" class="clsPanelSelectOption" multiple="multiple" onmousedown="isAutocomplete = true;" onClick="SelectValue(this,'autocompleteImpactDiv');" >
                                                                    </select>
                                                                </div>
                                                                
                                                                
                                                                </td>
                                                                <td class="lookupIconPanelTD">
                                                                      <div class="lookUpIconDiv"><input class="lookupIconOn" id="impactLookup" type="button" onclick="if(!inProgress) { openPopup('SearchPage?popupId=Impact&isLookup=true&filterClause='+escape('inactive__c = false'),openImpactLookup);}"  tabindex="515"/></div>
                                                                 </td>
                                                            </tr>
                                                            <tr>  
                                                                <td class="clsPanelInputLabelTD"><apex:outputLabel value="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKUrgency__c.label}" /></td>
                                                                <td class="clsPanelInputTextboxTD1">
                                                                <apex:inputText id="Urgency__c_id_name"  value="{!changeBean.urgencyName}"  title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKUrgency__c.InlineHelpText}" styleClass="clsPanelInputTextbox safariAutoComplete"  tabindex="516" onKeyUp="findIt('sel1','autocompleteUrgencyDiv',this,event)" onblur="disableDiv('autocompleteUrgencyDiv');showDataCommon(event,FetchPriorityHTTP,escape('inactive__c = false'),escape('urgencyflag'));"/>
                                                                       <apex:inputhidden id="Urgency__c_id_id" value="{!changeBean.fkUrgency}"/>
                                                                <div id='autocompleteUrgencyDiv' class="clsPanelAutocompleteDiv">
                                                                    <select id="sel1" class="clsPanelSelectOption" multiple="multiple" onmousedown="isAutocomplete = true;" onClick="SelectValue(this,'autocompleteUrgencyDiv');" >
                                                                    </select>
                                                                </div>
                                                                
                                                                </td>
                                                                <td class="lookupIconPanelTD" >
                                                                    <div class="lookUpIconDiv">
                                                                        <input class="lookupIconOn" id="urgencyLookup" type="button" onclick="if(!inProgress) {openPopup('SearchPage?popupId=Urgency&isLookup=true&filterClause='+escape('inactive__c = false'),openUrgencyLookup);}"  onblur="if(!inProgress) { }" tabindex="517"/>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td class="clsPanelInputLabelTD"><apex:outputLabel value="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKPriority__c.label}" /></td>
                                                                <td class="clsPanelInputTextboxTD1"><apex:inputText title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields.BMCServiceDesk__FKPriority__c.InlineHelpText}" styleClass="clsPanelInputTextboxReadOnly" value="{!changeBean.priorityName}" id="Priority__c_id_name" onfocus="this.blur();" />
                                                                    <apex:inputhidden value="{!changeBean.fkPriority}" id="varFKPriority"/>
                                                                </td>
                                                            </tr>
                                                     </table>   
                                                     <apex:repeat value="{!$ObjectType.BMCServiceDesk__Change_Request__c.FieldSets.BMCServiceDesk__DetailsSection}" var="DetailsSectionVar">
                                                     <apex:outputPanel rendered="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].accessible}" >
                                                     <!-- <apex:outputPanel rendered="{!CASE(TEXT($ObjectType.Change_Request__c.fields[DetailsSectionVar].localname),'Closed_Date_Time__c', TEXT(NOT(OR(ISBLANK(TRIM(changeBean.closeDate)),ISNULL(changeBean.closeDate)))), 'FKServiceRequest__c', TEXT(NOT(OR(ISBLANK(TRIM(changeBean.requestDetailName)),ISNULL(changeBean.requestDetailName)))), 'true')}" >  -->
                                                     <apex:outputPanel rendered="{!NOT(OR(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'area'),CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'multipicklist')))}" >
                                                     <apex:outputPanel rendered="{!IF(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].localname,'Closed_Date_Time__c'), NOT(OR(ISBLANK(TRIM(changeBean.closeDate)),ISNULL(changeBean.closeDate))), IF(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].localname,'FKServiceRequest__c'),NOT(OR(ISBLANK(TRIM(changeBean.requestDetailName)),ISNULL(changeBean.requestDetailName))), true))}">
                                                       <table class="clsFieldSetAccordianTable" cellpadding="0" cellspacing="0">
                                                        <tr >
                                                            <td class="clsFieldSetAccordianLabelTD">{!$ObjectType.Change_Request__c.fields[DetailsSectionVar].label}
                                                             <apex:outputPanel rendered="{!fieldIsRequired[DetailsSectionVar]}">
																			<span class="clsRequiredBlack">*</span>
																			</apex:outputPanel></td>
                                                            <td class="clsFieldSetAccordianTextBoxTD clsCustomCR" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].inlineHelpText}" >
                                                            
                                                            <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'reference')}" >
                                                            	<apex:outputPanel rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].localname,'FKServiceRequest__c'))}">
                                                                <apex:inputText value="{!referenceFieldMap[$ObjectType.BMCServiceDesk__Change_Request__c.Fields[DetailsSectionVar].localname].value}"   style="display:none"/>
                                                                <input type="text"  value="{!changeBean.changeReqObj[referenceFieldMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].referenceNameField][referenceFieldMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].referenceNameFieldSec]}" id="{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].idForName}" onblur=" isAutocomplete = false;resetReferenceFields(this); {!IF(referenceFieldMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].hasInActiveField, 'showDataCommonTest(event);' , 'showDataCommon(event,null,null);')}"  class="clsFieldSetAccordianTextBox" />
                                                                <input type="text"  value="{!changeBean.changeReqObj[DetailsSectionVar]}" id="{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].idForId}" style="display:none"/> 
                                                                <apex:inputText value="{!changeBean.changeReqObj[DetailsSectionVar]}" id="referenceId" style="display:none" />
                                                                <input type="button" rendered="{!IF(OR(NOT(changeBean.isChangeCreatable),readOnlyMap[DetailsSectionVar]) , false,true)}" class="lookupIconOn" id="lastnameLookup_Id" tabindex="501" style="{!IF(contains($ObjectType.Change_Request__c.Fields[DetailsSectionVar].type, "reference"), 'display:inline', 'display:none')}" onclick="if(!inProgress) {openLookupPopup(this,'{!$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname}','Change_Request__c'); return false;}"/>
                                                                  <script>
                                                                            var dorDetailEleValue = document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].idForName}').previousSibling.previousSibling.value;
                                                                            if(dorDetailEleValue  == "" || dorDetailEleValue == null)
                                                                                document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].idForName}').value = '{!JSENCODE(changeBean.changeReqObj[referenceFieldMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].referenceNameField][referenceFieldMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].referenceNameFieldSec])}';
                                                                            else
                                                                                document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].idForName}').value = dorDetailEleValue; 
                                                                </script>
                                                             </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].localname,'FKServiceRequest__c')}">
                                                               	 <table class="clsPanelInputTextboxReadOnly clsHyperLinkStyle" cellpadding="0" cellspacing="0" style="width: 140px;padding-left: 5px;"><tr><td>
	                                                              	<a id="Incident__c_id_name" onclick="OpenServiceRequest('IncidentPage')" href="#">{!JSENCODE(changeBean.requestDetailName)}</a>
	                                                              	<apex:inputhidden id="Incident__c_id_id" value="{!changeBean.changeReqObj.BMCServiceDesk__FKServiceRequest__c}"/>
	                                                              	</td></tr></table>
	                                                            </apex:outputPanel>
                                                             </apex:outputPanel>
                                                             
                                                             <!-- For Non Reference Fields -->
                                                             <apex:outputPanel rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'reference'))}">
                                                                
                                                                <!-- For Date Fields And Change is Creatable-->
                                                                <apex:outputPanel rendered="{!AND(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'date'), changeBean.isChangeCreatable)}" id="detailsSecDates1">
                                                                    <apex:outputPanel rendered="{!NOT(OR(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].localName, 'Closed_Date_Time__c'),CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].localName, 'Responded_Date__c')))}" >
                                                                    	<apex:inputField rendered="{!NOT(readOnlyMap[DetailsSectionVar])}" value="{!changeBean.changeReqObj[DetailsSectionVar]}" styleClass="clsFieldSetAccordianTextBox" onclick="setDatePickerPosition('{!$ObjectType.BMCServiceDesk__Change_Request__c.Fields[DetailsSectionVar].type}',event)"/>
																		<apex:outputPanel layout="block" styleClass="clsAccordionOutputPanelReadOnly" rendered="{!readOnlyMap[DetailsSectionVar]}">
                                                                    	<apex:inputField id="readOnlyDate3" rendered="{!readOnlyMap[DetailsSectionVar]}" value="{!changeBean.changeReqObj[DetailsSectionVar]}" styleClass="clsCustomInputFieldReadOnly"/>
                                                                    	<script>var dateField = document.getElementById('{!$Component.readOnlyDate3}'); if(dateField != null && dateField != 'undefined'){dateField.disabled = true}</script>
																		</apex:outputPanel>
                                                                	</apex:outputPanel>
																	<apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].localName, 'Closed_Date_Time__c')}" id="CloseDateTime3">
	                                                                   <table cellpadding="0" cellspacing="0"><tr><td>
	                                                                    <apex:inputField id="closeDate3" value="{!changeBean.changeReqObj[DetailsSectionVar]}" styleClass="clsFieldSetAccordianTexBoxReadOnly" />
	                                                                    <script>var dateField = document.getElementById('{!$Component.closeDate3}'); if(dateField != null && dateField != 'undefined'){dateField.disabled = true}</script>
	                                                                    </td><td>
	                                                                    <button type ="button" id="fieldInfobtn3" style="{!IF(changeBean.closeState,'display:block','display:none')}" class="commentsInfoTooltip" onmouseover="showInfoPopup(event,'closeCommentsPopupDiv','closeComments');" onmouseout="fieldInfo_out(this);"/>
	                                                                	</td></tr></table>	
	                                                                </apex:outputPanel>
	                                                                
	                                                                <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].localName, 'Responded_Date__c')}" id="RespondedDateTime3">
	                                                                   <table cellpadding="0" cellspacing="0"><tr><td>
	                                                                    <apex:inputField id="respondedDate3" value="{!changeBean.changeReqObj[DetailsSectionVar]}" styleClass="clsFieldSetAccordianTexBoxReadOnly" onfocus="this.blur()" />
	                                                                    <script>var dateField = document.getElementById('{!$Component.respondedDate3}'); if(dateField != null && dateField != 'undefined'){dateField.disabled = true}</script>
	                                                                    </td><td></td>
	                                                                    </tr></table>	
	                                                                </apex:outputPanel>
	                                                            </apex:outputPanel>
                                                                
                                                                <!-- For Date Fields And Change is Not Creatable-->
                                                                <apex:outputPanel rendered="{!AND(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'date'), NOT(changeBean.isChangeCreatable))}" layout="block" id="detailsSecDates2" styleClass="clsAccordionOutputPanelReadOnly">
	                                                                    <apex:inputField value="{!changeBean.changeReqObj[DetailsSectionVar]}" styleClass="clsCustomInputFieldReadOnly"/>
                                                                </apex:outputPanel> 
                                                                
                                                                <!-- For Fields which are not of type Date/Reference/Area-->
                                                                <apex:outputPanel rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'date'))}" >
                                                                    <apex:outputPanel rendered="{!changeBean.isChangeCreatable}">
                                                                    	 <apex:outputPanel layout="block" styleClass="{!IF(readOnlyMap[DetailsSectionVar],'clsAccordionOutputPanelReadOnly','')}">
                                                                        <input type="hidden"  value="{!changeBean.changeReqObj[DetailsSectionVar]}" id="{!otherFieldsMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].idForName}" inFieldSet="true"/>
                                                                        <apex:inputField value="{!changeBean.changeReqObj[DetailsSectionVar]}" styleClass="{!IF(readOnlyMap[DetailsSectionVar], 'clsCustomInputFieldReadOnly',IF(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'boolean'),'clsAccordianCheckBoxCustom','clsFieldSetAccordianTextBox'))}" />
                                                                           <apex:outputPanel rendered="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].DependentPicklist}"  id="isDependentPanel">
																			     <script>   
																			         isdependent={!$ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].DependentPicklist};
                                                                                  </script>
																	  </apex:outputPanel>   
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel rendered="{!NOT(changeBean.isChangeCreatable)}">
                                                                    	<apex:outputPanel layout="block"  rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'boolean')}">
                                                                             <apex:inputField value="{!changeBean.changeReqObj[DetailsSectionVar]}" style="margin-left: 5px;"/>
                                                                         </apex:outputPanel>
                                                                         <apex:outputPanel layout="block"  rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'boolean'))}" styleclass="clsAccordionOutputPanelReadOnly">
                                                                             <apex:inputField value="{!changeBean.changeReqObj[DetailsSectionVar]}" styleClass="clsCustomInputFieldReadOnly"/>
                                                                         </apex:outputPanel>		
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                </td>
                                                                
                                                                </tr>
                                                                </table>
                                                                </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <!-- For Area Fields -->
                                                                <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'area')}">
                                                                <table cellpadding="0" cellspacing="0" class="clsFieldSetAccordianTable">
                                                                    <tr>
                                                                        <td class="clsFieldSetAccordianLabelTD" >{!$ObjectType.Change_Request__c.fields[DetailsSectionVar].label}<apex:outputPanel rendered="{!fieldIsRequired[DetailsSectionVar]}">
																			<span class="clsRequiredBlack">*</span>
																			</apex:outputPanel></td>
                                                                           <td class="clsFieldSetAccordianTextBoxTD clsCustomCR"  title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].inlineHelpText}" >
                                                                           <input type="hidden" value="{!changeBean.changeReqObj[DetailsSectionVar]}" id="{!otherFieldsMap[$ObjectType.Change_Request__c.Fields[DetailsSectionVar].localname].idForName}"  inFieldSet="true"/>
                                                                           <apex:inputTextarea value="{!changeBean.changeReqObj[DetailsSectionVar]}" styleClass="clsFieldSetAccordianTexArea"  onBlur="validateMe();" title="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].inlineHelpText}"/>
                                                                        </td>
                                                                    </tr>                                                                           
                                                                 </table>   
                                                                 </apex:outputPanel>
																 <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[DetailsSectionVar].type,'multipicklist')}">
											                              <table class="accordionMultiPickListClsTable" cellspacing="0" cellpadding="0" >
											                                <tr>
											                                    <td class="clsAccordianMultiPickListLabelTD">{!$ObjectType.Change_Request__c.fields[DetailsSectionVar].label}</td>
											                                    
											                                </tr>
											                                <tr>
											                                    <td class="multiPickListClsTD">
											                                     <apex:inputField value="{!changeBean.changeReqObj[DetailsSectionVar]}" styleClass="accordionMultiPickListCls"/>
											                                    
											                                    </td>
											                                       
											                                </tr>
											                                </table> 
											                             </apex:outputPanel>
                                                                 </apex:outputPanel>
                                                   </apex:repeat>  
                                                    <div style="height:5px;background:#FFFFFF;"></div>
                                                    </apex:outputPanel>
													</div>
                                                  </apex:panelBarItem>
                                                  <apex:panelBarItem label="{!$Label.bmcservicedesk__staffassignmentdetails}" headerClass="panelHeader staffAssignmentPanelHeader"  id="staffAssignmentPanel" contentClass="panelContent">
                                                        <script>
                                                            var staffPanelBar = document.getElementById('{!$Component.staffAssignmentPanel}');
                                                            var i=0;
                                                            if(staffPanelBar.childNodes.length > 0){
                                                                for(i=0; i<staffPanelBar.childNodes.length;i++){
                                                                    if(staffPanelBar.childNodes[i] != null)
                                                                        if(staffPanelBar.childNodes[i].className.indexOf('staffAssignmentPanelHeader') > 0){
                                                                            staffPanelBar.childNodes[i].title = '{!JSENCODE($Label.StaffAssignmentDetails)}';
                                                                        }
                                                                }                                           
                                                            }
                                                        </script>
                                                     <apex:outputPanel id="assignedToPanel">
                                   <!-- 5 -->         
                                   <!-- 5 -->          <table cellpadding="0" cellspacing="0" class="clsTable">
                                                            <tr>
                                                                    <td colspan="3" class="viewMoreDtlsBg">
                                                                    <button  type ="button" id="staffInfobtn" Class="bmcUserInfoPopup" onmouseover="showInfoPopup(event,'staffPopupDiv','staff');"/></td>
                                                            </tr>
                                                            
                                                            <tr>
                                                                <td height="15"></td>
                                                            </tr> 
                                                                
                                                             <tr >
                                                                <td class="clsPanelInputLabelTD"><apex:outputLabel value="{!$ObjectType.User.fields.FirstName.label}"/></td>
                                                                <td class="clsPanelInputTextboxTD1">
                                                                    <apex:inputText title="{!$Label.bmcservicedesk__tooltip_staffassignment_firstname}" value="{!changeBean.firstName}" id="change_firstname__c"   styleClass="clsPanelInputTextboxReadOnly" onfocus="this.blur();"/>
                                                                </td>
                                                                 <td class="lookupIconPanelTD">&nbsp;</td>
                                                            </tr>
                                                            <tr >
                                                                <td class="clsPanelInputLabelTD"><apex:outputLabel value="{!$ObjectType.User.fields.LastName.label}"/></td>
                                                                <td class="clsPanelInputTextboxTD1">
                                                                    <apex:inputText title="{!$Label.bmcservicedesk__tooltip_staffassignment_lastname}" value="{!changeBean.lastName}" id="change_lastname__c"   styleClass="clsPanelInputTextboxReadOnly" onfocus="this.blur();"/>
                                                                </td>
                                                                 <td class="lookupIconPanelTD">&nbsp;</td>
                                                            </tr>
                                                            <tr >
                                                                <td class="clsPanelInputLabelTD"><apex:outputLabel value="{!$ObjectType.Profile.label}"/></td>
                                                                <td class="clsPanelInputTextboxTD1">
                                                                    <apex:inputText title="{!$Label.bmcservicedesk__tooltip_staffassignment_profile}" value="{!changeBean.profile}" id="change_profile__c"   styleClass="clsPanelInputTextboxReadOnly" onfocus="this.blur();"/>
                                                                </td>
                                                                 <td class="lookupIconPanelTD">&nbsp;</td>
                                                            </tr>
                                                            <tr >
                                                                <td class="clsPanelInputLabelTD"><apex:outputLabel value="{!$ObjectType.User.fields.Phone.label}"/></td>
                                                                <td class="clsPanelInputTextboxTD1">
                                                                    <apex:inputText title="{!$Label.bmcservicedesk__tooltip_staffassignment_phone}" value="{!changeBean.phone}" id="change_phone__c"   styleClass="clsPanelInputTextboxReadOnly" onfocus="this.blur();"/>
                                                                </td>
                                                                 <td class="lookupIconPanelTD">&nbsp;</td>
                                                            </tr>
                                                            <tr >
                                                                <td class="clsPanelInputLabelTD"><apex:outputLabel value="{!$ObjectType.User.fields.Extension.label}"/></td>
                                                                <td class="clsPanelInputTextboxTD1">
                                                                    <apex:inputText title="{!$Label.bmcservicedesk__tooltip_staffassignment_extension}" value="{!changeBean.extension}" id="change_extension__c"   styleClass="clsPanelInputTextboxReadOnly" onfocus="this.blur();"/>
                                                                </td>
                                                                 <td class="lookupIconPanelTD">&nbsp;</td>
                                                            </tr>
                                                           	<tr>
                                                                 <td class="clsPanelInputLabelTD"><apex:outputLabel value="{!$Label.bmcservicedesk__queue}" /></td>
                                                                 <td class="clsPanelInputTextboxTD1"><apex:inputText onfocus="this.blur()" title="{!$Label.bmcservicedesk__tooltip_staffassignment_queue}" id="staff_queue" value="{!changeBean.queue}"  styleClass="clsPanelInputTextboxReadOnly"/></td>  
                                                                 <td class="lookupIconPanelTD" align="left">&nbsp;</td>
                                                             </tr>                                           
                                                            
                                     <!-- 55 -->        </table>
                                                       </apex:outputPanel>  
                                                    </apex:panelBarItem>
                                                    <apex:panelBarItem onenter="loadChatterFeeds();" label="{!$Label.bmcservicedesk__changechatterfeed}" rendered="{!IF(ChangeRequestFeed,true,false)}" headerClass="panelHeader" contentClass="panelContent" id="ChangeChatterFeed">
                                                        <table cellpadding="0" cellspacing="0">
                                                            <tr><td height = "10"></td></tr>
                                                        </table>
                                                        <c:RecordFeedComponent id="ChangeChatterFeedComponent" RecordID="{!ChangeID}" MoreFeedsTabTitle="{!$Label.bmcservicedesk__changechatterfeed}" TooltipChatterShare="{!$Label.bmcservicedesk__tooltipchattersharechange}" TooltipComment="{!$Label.bmcservicedesk__tooltipchattercomment}" RecordType="Change Request" ></c:RecordFeedComponent>
                                                    </apex:panelBarItem>
                                                     
                                                    <apex:panelBarItem id="AdditionalFieldspanelBar" label="{!$Label.bmcservicedesk__additionaldetailscustomtask}" headerClass="panelHeader" >
                                                     <apex:outputPanel id="AdditionalFieldsOutputPanel">
                                                     <div style="height: 15px;"></div>
                                                     <script>var hideCustomFieldAccordion=true;</script>
                                                     <apex:repeat value="{!$ObjectType.BMCServiceDesk__Change_Request__c.FieldSets.BMCServiceDesk__OtherFieldsSection}" var="OtherFieldsSectionVar" >
                                                     <apex:outputPanel rendered="{!$ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].accessible}" >
                                                     <apex:outputPanel rendered="{!NOT(OR(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'area'),CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'multipicklist')))}" >
                                                       <table class="clsFieldSetAccordianTable" cellpadding="0" cellspacing="0">
                                                       	<tr>
                                                            <td class="clsFieldSetAccordianLabelTD">{!$ObjectType.Change_Request__c.fields[OtherFieldsSectionVar].label}
                                                            <apex:outputPanel rendered="{!fieldIsRequired[OtherFieldsSectionVar]}">
																			<span class="clsRequiredBlack">*</span>
																			</apex:outputPanel></td>
                                                            <td class="clsFieldSetAccordianTextBoxTD"   style="padding-bottom: 5px;" title="{!$ObjectType.Change_Request__c.fields[OtherFieldsSectionVar].inlineHelpText}">  
                                                            <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'reference')}" >
                                                                <apex:inputText value="{!referenceFieldMap[$ObjectType.BMCServiceDesk__Change_Request__c.Fields[OtherFieldsSectionVar].localname].value}"   style="display:none"/>
                                                                <input type="text"  value="{!changeBean.changeReqObj[referenceFieldMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].referenceNameField][referenceFieldMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].referenceNameFieldSec]}" id="{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].idForName}" onblur="isAutocomplete = false;resetReferenceFields(this);  {!IF(referenceFieldMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].hasInActiveField, 'showDataCommonTest(event);' , 'showDataCommon(event,null,null);')}"  class="clsFieldSetAccordianTextBox" />
                                                                <input type="text"  value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}" id="{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].idForId}" style="display:none"/> 
                                                                <apex:inputText value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}"   id="referenceId" style="display:none"/>
                                                                <input type="button" rendered="{!IF(OR(NOT(changeBean.isChangeCreatable),readOnlyMap[OtherFieldsSectionVar]) , false,true)}" class="lookupIconOn" id="lastnameLookup_Id" tabindex="501" style="{!IF(contains($ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].type, "reference"), 'display:inline', 'display:none')}" onclick="if(!inProgress) {openLookupPopup(this,'{!$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname}','Change_Request__c'); return false;}"/>
                                                                  <script>
                                                                            var dorDetailEleValue = document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].idForName}').previousSibling.previousSibling.value;
                                                                            if(dorDetailEleValue  == "" || dorDetailEleValue == null)
                                                                                document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].idForName}').value = '{!JSENCODE(changeBean.changeReqObj[referenceFieldMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].referenceNameField][referenceFieldMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].referenceNameFieldSec])}';
                                                                            else
                                                                                document.getElementById('{!referenceFieldMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].idForName}').value = dorDetailEleValue; 
                                                                </script>
                                                             </apex:outputPanel>
                                                             <!--  For Non Reference Fields -->
                                                             <apex:outputPanel rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'reference'))}">
                                                             	<!--  For Date Fields And Change is Creatable -->
                                                             	<apex:outputPanel rendered="{!AND(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'date'), changeBean.isChangeCreatable)}">
                                                                    <apex:inputField rendered="{!NOT(readOnlyMap[OtherFieldsSectionVar])}" value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}" styleClass="clsFieldSetAccordianTextBox" onclick="setDatePickerPosition('{!$ObjectType.BMCServiceDesk__Change_Request__c.Fields[OtherFieldsSectionVar].type}',event)" />
																	<apex:outputPanel layout="block" styleClass="clsAccordionOutputPanelReadOnly" rendered="{!readOnlyMap[OtherFieldsSectionVar]}">
                                                                    <apex:inputField id="readOnlyDate4" rendered="{!readOnlyMap[OtherFieldsSectionVar]}" value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}" styleClass="clsCustomInputFieldReadOnly" />
                                                                    <script>var dateField = document.getElementById('{!$Component.readOnlyDate4}'); if(dateField != null && dateField != 'undefined'){dateField.disabled = true}</script>
																	</apex:outputPanel>
                                                                </apex:outputPanel>
                                                                
                                                                <!--  For Date Fields And Change Not is Creatable -->
                                                                	<apex:outputPanel rendered="{!AND(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'date'), NOT(changeBean.isChangeCreatable))}" layout="block" id="detailsSecDates2" styleClass="clsAccordionOutputPanelReadOnly">
	                                                                    <apex:inputField value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}" styleClass="clsCustomInputFieldReadOnly"/>
                                                                </apex:outputPanel> 
                                                                
                                                                
                                                                <!--  For Fields which are not of type Date/Reference/Area -->
                                                                <apex:outputPanel rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'date'))}" >
                                                                    <apex:outputPanel rendered="{!changeBean.isChangeCreatable}" layout="block" styleClass="{!IF(readOnlyMap[OtherFieldsSectionVar],'clsAccordionOutputPanelReadOnly','')}">
                                                                        <input type="hidden"  value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}" id="{!otherFieldsMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].idForName}" inFieldSet="true"/>
                                                                        <apex:inputField value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}" styleClass="{!IF(readOnlyMap[OtherFieldsSectionVar], 'clsCustomInputFieldReadOnly',IF(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'boolean'),'clsAccordianCheckBoxCustom','clsFieldSetAccordianTextBox'))}"/>
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel rendered="{!NOT(changeBean.isChangeCreatable)}">
                                                                        <apex:outputPanel layout="block"  rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'boolean')}">
                                                                             <apex:inputField value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}" style="margin-left: 5px;"/>
                                                                         </apex:outputPanel>
                                                                         <apex:outputPanel layout="block"  rendered="{!NOT(CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'boolean'))}" styleclass="clsAccordionOutputPanelReadOnly">
                                                                             <apex:inputField value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}" styleClass="clsCustomInputFieldReadOnly"/>
                                                                         </apex:outputPanel>	                                                                   
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                </td>
                                                                
                                                                </tr>
                                                                </table>
                                                                </apex:outputPanel>
                                                                
                                                                <!-- For Area Fields -->
                                                                <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'area')}">
                                                                <table class="clsFieldSetAccordianTable" cellpadding="0" cellspacing="0">
                                                                    <tr>
                                                                        <td class="clsFieldSetAccordianLabelTD" >{!$ObjectType.Change_Request__c.fields[OtherFieldsSectionVar].label}
                                                                        <apex:outputPanel rendered="{!fieldIsRequired[OtherFieldsSectionVar]}">
																			<span class="clsRequiredBlack">*</span>
																			</apex:outputPanel>
																			</td>
                                                                        <td class="clsFieldSetAccordianTextBoxTD"  title="{!$ObjectType.Change_Request__c.fields[OtherFieldsSectionVar].inlineHelpText}">  
                                                                            <input type="hidden" value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}" id="{!otherFieldsMap[$ObjectType.Change_Request__c.Fields[OtherFieldsSectionVar].localname].idForName}"  inFieldSet="true"/>
                                                                            <apex:inputTextarea value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}"  styleClass="clsFieldSetAccordianTexArea"  onBlur="validateMe();"/>
                                                                        </td>
                                                                    </tr>                                                                           
                                                                 </table>   
                                                                 </apex:outputPanel>
																 <apex:outputPanel rendered="{!CONTAINS($ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].type,'multipicklist')}" >
											                              <table class="accordionMultiPickListClsTable" cellspacing="0" cellpadding="0" >
											                                <tr>
											                                    <td class="clsAccordianMultiPickListLabelTD">{!$ObjectType.Change_Request__c.fields[OtherFieldsSectionVar].label}</td>
											                                    
											                                </tr>
											                                <tr>
											                                    <td class="multiPickListClsTD">
											                                     <apex:inputField value="{!changeBean.changeReqObj[OtherFieldsSectionVar]}" styleClass="accordionMultiPickListCls"/>
											                                    
											                                    </td>
											                                       
											                                </tr>
											                                </table> 
											                             </apex:outputPanel>
                                                                  <script>                                        
                                                                         if({!$ObjectType.BMCServiceDesk__Change_Request__c.fields[OtherFieldsSectionVar].accessible}){
                                                                             hideCustomFieldAccordion = false;
                                                            }
                                                        </script>
                                                  	</apex:outputPanel>               
                                                   </apex:repeat> 
                                                   	 <div style="height: 15px;"></div>
                                                     </apex:outputPanel>  
                                                    </apex:panelBarItem>
                                                     
                                               </apex:panelBar>    
                                        </apex:outputPanel>
                                  
                                       </div>
                                     </td> 
                                </tr>
                             </table> 
                         </apex:outputPanel>
                         
                      </td>
             </tr>
          </table>
          <div style="display:none;">
                        <apex:outputpanel id="staffPopupID">
                       <div id="staffPopupDiv" >                           
                            <table  cellspacing="0" cellpadding ="0" >
                            <tr>
                                <td ><apex:inputHidden id="staffHiddeninput" value="{!changeBean.userId}" /></td>
                                <td>
                                <table cellspacing="0" cellpadding ="0">
                                        <tr >
                                         <td style=" padding-top:5px; padding-left:4px; " class="clsInputBoldLabelTooltip1">                                        
                                         <div id="userNameforttdivId"></div> 
                                          </td>
                                        </tr>
                                        <tr style="{!IF(changeBean.user.title=='','display:none','')}">
                                       
                                        <td style=" padding-top:1px; padding-bottom: 4px; padding-left:4px;" class="clsInputLabelTooltipTitle1">
                                       
                                        <div id="userTitleforttdivId"></div> 
                                        </td>
                                        </tr>
                                        <tr  style="{!IF(changeBean.user.street=='','display:none','')}">
                                        <td style="padding-left:4px; padding-top:1px;" class="clsInputLabelTooltip1"> 
                                       
                                        <div id="userAddressforttdivId"> {!changeBean.user.street} </div>  
                                       </td>
                                        </tr>
                                        
                                        <tr style=" {!IF(changeBean.user.city =='' && changeBean.user.state =='' && changeBean.user.Postalcode =='','display:none','')}">
                                        <td style="padding-left:4px;" class="clsInputLabelTooltip1">
                                        <div id="userCSZforttdivId"></div></td>
                                                                               </tr>
                                        <tr style="{!IF(changeBean.user.country=='','display:none','')}">
                                        <td style="padding-left:4px;" class="clsInputLabelTooltip1">
                                        <div id="userCountryforttdivId"></div> 
                                        </td>
                                        </tr>                                        
                                        <tr style=" {!IF(changeBean.user.Phone=='','display:none','')}">
                                        <td  style=" padding-top:5px; padding-left:4px;" class="clsInputLabelTooltip1">
                                        <div id="userPhoneforttdivId"></div> 
                                        </td>
                                        </tr>
                                        <tr style=" {!IF(changeBean.user.email=='','display:none','')}">
                                        <td style="padding-bottom: 5px; padding-top:1px; padding-left:4px;" class="clsInputLabelTooltip1">
                                        <div id="userEmailforttdivId"></div>
                                           </td>
                                         </tr>                                                                              
                                </table>
                                </td>
                            </tr>
                           </table>
                        
                        </div>
                        <script>
                        function tooltipforstaff(){
                              var cszstringuser = formCSZString('{!JSENCODE(changeBean.user.city)}','{!JSENCODE(changeBean.user.state)}','{!JSENCODE(changeBean.user.Postalcode)}');
                              tooltipforstaffJS('{!JSENCODE(changeBean.user.Name)}','{!JSENCODE(changeBean.user.title)} ',cszstringuser,'{!JSENCODE(changeBean.user.country)}','{!JSENCODE(changeBean.user.Phone)}','{!JSENCODE(changeBean.user.email)}');                          
                        }
                        </script>
                     </apex:outputpanel>
                             <apex:outputpanel id="closeCommentsPopupID"  >
                             <div id="closeCommentsPopupDiv" >                           
                             <script>
                             function assignTheCommentValue(){
                                document.getElementById('closeCommentsPopupDivID').innerHTML = '{!JSENCODE(changeBean.closeComments)}';
                             }
                             </script>
                            <table  cellspacing="0" cellpadding ="0" >
                            <tr>
                              
                                         <td style="padding:5px;padding-right:-10px;" class="clsInputLabelTooltip1">
                                         <div id="closeCommentsPopupDivID"> </div>                                        
                                          </td>
                                 
                            </tr>
                           </table>
                        </div>
                           </apex:outputpanel>
     </div>        
                        </div>
      <div id="detailsDivSI">
                      <table cellpadding="0"  cellspacing="0" class="onDemandSITableCls" id="onDemandSITableId">
                          <tr>
                             <td id="noSIAvailTD">{!$Label.SIMessageForNewIncident}</td>
                          </tr>  
                          <tr >
                              <td id="linkSIAvailTD">
                                 <table class="SICheckboxLinkInnerTable" cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td id="configureSITD">
                                            <input type="checkbox" title="{!$Label.ShowSupportingInformation}" id="configureSIId" onClick="writeCookie();"/>&nbsp;{!$Label.SIMessageForConfiguration}
                                            
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <a id="getSIUrl" href="JavaScript:void(0);" onClick="SIComp('/apex/SIContainerPage?oid='+getChangeId()+'&otype=Change_Request__c&wid='+wid+'&stateofIncident='+getChangeCloseState()+ '&isChangeCreatable='+getIsChangeCreatable()+'&isInactive='+isInactive);" >{!$Label.SIMessageForExistingIncident}</a>
                                        </td>
                                    </tr>
                                  </table>
                                
                              </td>
                          </tr>
                       </table>
                       <iframe name='SIIframeID' id='SIIframeID'  width='100%' height='100%' frameborder='0' style="display:none"/>
                        </div>
    
    
    
<c:TabOutComponent ></c:TabOutComponent>
       
  </apex:form>
  </apex:outputPanel>
  <apex:outputPanel id="errMsgCopyDeleted">
  	<script>
		taboutPageType = 'custom';
  		var copyParam = '{!JSENCODE($CurrentPage.parameters.copyId)}';
  		if(copyParam != null && copyParam != '' && copyParam != 'undefined'){
  			errormsg = '{!JSENCODE(changeBean.messageString)}';
  			if(errormsg != null && errormsg != ''){
  				//showErrorMsgCR(errormsg);
  			}
  			
  		}
       
    </script>
  </apex:outputPanel>
  
    <script>
        var btnChangeRequestValue = '{!JSENCODE($ObjectType.Change_Request__c.fields.Change_Description__c.label)}';
        if(btnChangeRequestValue.length > 11 && document.getElementById('changeDescriptionBtn') != 'undefined'){
            btnChangeRequestValue = Ext.util.Format.ellipsis(btnChangeRequestValue,14);  
        }
        document.getElementById('changeDescriptionBtn').value = btnChangeRequestValue;   
        
        var btnReason_for_Change__cValue = '{!JSENCODE($ObjectType.Change_Request__c.fields.Reason_for_Change__c.label)}';
        if(btnReason_for_Change__cValue.length > 17 && document.getElementById('reasonForChangeBtn') != 'undefined'){
            btnReason_for_Change__cValue = Ext.util.Format.ellipsis(btnReason_for_Change__cValue,20);
        }
        document.getElementById('reasonForChangeBtn').value = btnReason_for_Change__cValue;
        
        var btnrolloutPlanValue = '{!JSENCODE($ObjectType.Change_Request__c.fields.Roll_Out_Plan__c.label)}';
        if(btnrolloutPlanValue.length > 12 && document.getElementById('rolloutPlanBtn') != 'undefined'){
            btnrolloutPlanValue = Ext.util.Format.ellipsis(btnrolloutPlanValue,15);   
        }
        document.getElementById('rolloutPlanBtn').value = btnrolloutPlanValue;
        
        var btnbackoutPlanValue = '{!JSENCODE($ObjectType.Change_Request__c.fields.Back_Out_Plan__c.label)}';
        if(btnbackoutPlanValue.length > 13 && document.getElementById('backoutPlanBtn') != 'undefined'){
            btnbackoutPlanValue = Ext.util.Format.ellipsis(btnbackoutPlanValue,16);              
        }
        document.getElementById('backoutPlanBtn').value = btnbackoutPlanValue;   

        var stime = '{!serverstarttime}';
        var etime = '{!currenttime}';
        var servertime = etime - stime;
        var networkstart = etime;
        data +=servertime;
        data += '<br>';
    </script>
        <apex:outputPanel id="urlStringPanelId">
    <script>
    urlStringVar ="{!urlQueryString}" 
    </script>
    </apex:outputPanel>   
    <!--  This output panel is added for the special case of the dependent picklist field added in the fieldset.-->
    <apex:outputPanel id="dependentPanel" >
    <script>
	    if(isdependent){
		     <apex:repeat value="{!keyValues}" var="keys" > 
				  	        keyName='{!keys.key}';
			     	        keyValue={!keys.value};
							setChangeVal(keyName,keyValue);
			 </apex:repeat>     
			 }		
   </script>
             
				  </apex:outputPanel>         
</apex:page>